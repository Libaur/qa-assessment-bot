{"version":3,"file":"main.cjs","sources":["../node_modules/grammy/out/web.mjs","../node_modules/dotenv/lib/main.js","../../constants/index.ts","../../config/index.ts","../../utils/index.ts","../../index.ts"],"sourcesContent":["const filterQueryCache = new Map();\nfunction matchFilter(filter) {\n    const queries = Array.isArray(filter) ? filter : [\n        filter\n    ];\n    const key = queries.join(\",\");\n    const predicate = filterQueryCache.get(key) ?? (()=>{\n        const parsed = parse(queries);\n        const pred = compile(parsed);\n        filterQueryCache.set(key, pred);\n        return pred;\n    })();\n    return (ctx)=>predicate(ctx);\n}\nfunction parse(filter) {\n    return Array.isArray(filter) ? filter.map((q)=>q.split(\":\")) : [\n        filter.split(\":\")\n    ];\n}\nfunction compile(parsed) {\n    const preprocessed = parsed.flatMap((q)=>check(q, preprocess(q)));\n    const ltree = treeify(preprocessed);\n    const predicate = arborist(ltree);\n    return (ctx)=>!!predicate(ctx.update, ctx);\n}\nfunction preprocess(filter) {\n    const valid = UPDATE_KEYS;\n    const expanded = [\n        filter\n    ].flatMap((q)=>{\n        const [l1, l2, l3] = q;\n        if (!(l1 in L1_SHORTCUTS)) return [\n            q\n        ];\n        if (!l1 && !l2 && !l3) return [\n            q\n        ];\n        const targets = L1_SHORTCUTS[l1];\n        const expanded = targets.map((s)=>[\n                s,\n                l2,\n                l3\n            ]);\n        if (l2 === undefined) return expanded;\n        if (l2 in L2_SHORTCUTS && (l2 || l3)) return expanded;\n        return expanded.filter(([s])=>!!valid[s]?.[l2]);\n    }).flatMap((q)=>{\n        const [l1, l2, l3] = q;\n        if (!(l2 in L2_SHORTCUTS)) return [\n            q\n        ];\n        if (!l2 && !l3) return [\n            q\n        ];\n        const targets = L2_SHORTCUTS[l2];\n        const expanded = targets.map((s)=>[\n                l1,\n                s,\n                l3\n            ]);\n        if (l3 === undefined) return expanded;\n        return expanded.filter(([, s])=>!!valid[l1]?.[s]?.[l3]);\n    });\n    if (expanded.length === 0) {\n        throw new Error(`Shortcuts in '${filter.join(\":\")}' do not expand to any valid filter query`);\n    }\n    return expanded;\n}\nfunction check(original, preprocessed) {\n    if (preprocessed.length === 0) throw new Error(\"Empty filter query given\");\n    const errors = preprocessed.map(checkOne).filter((r)=>r !== true);\n    if (errors.length === 0) return preprocessed;\n    else if (errors.length === 1) throw new Error(errors[0]);\n    else {\n        throw new Error(`Invalid filter query '${original.join(\":\")}'. There are ${errors.length} errors after expanding the contained shortcuts: ${errors.join(\"; \")}`);\n    }\n}\nfunction checkOne(filter) {\n    const [l1, l2, l3, ...n] = filter;\n    if (l1 === undefined) return \"Empty filter query given\";\n    if (!(l1 in UPDATE_KEYS)) {\n        const permitted = Object.keys(UPDATE_KEYS);\n        return `Invalid L1 filter '${l1}' given in '${filter.join(\":\")}'. \\\nPermitted values are: ${permitted.map((k)=>`'${k}'`).join(\", \")}.`;\n    }\n    if (l2 === undefined) return true;\n    const l1Obj = UPDATE_KEYS[l1];\n    if (!(l2 in l1Obj)) {\n        const permitted = Object.keys(l1Obj);\n        return `Invalid L2 filter '${l2}' given in '${filter.join(\":\")}'. \\\nPermitted values are: ${permitted.map((k)=>`'${k}'`).join(\", \")}.`;\n    }\n    if (l3 === undefined) return true;\n    const l2Obj = l1Obj[l2];\n    if (!(l3 in l2Obj)) {\n        const permitted = Object.keys(l2Obj);\n        return `Invalid L3 filter '${l3}' given in '${filter.join(\":\")}'. ${permitted.length === 0 ? `No further filtering is possible after '${l1}:${l2}'.` : `Permitted values are: ${permitted.map((k)=>`'${k}'`).join(\", \")}.`}`;\n    }\n    if (n.length === 0) return true;\n    return `Cannot filter further than three levels, ':${n.join(\":\")}' is invalid!`;\n}\nfunction treeify(paths) {\n    const tree = {};\n    for (const [l1, l2, l3] of paths){\n        const subtree = tree[l1] ??= {};\n        if (l2 !== undefined) {\n            const set = subtree[l2] ??= new Set();\n            if (l3 !== undefined) set.add(l3);\n        }\n    }\n    return tree;\n}\nfunction or(left, right) {\n    return (obj, ctx)=>left(obj, ctx) || right(obj, ctx);\n}\nfunction concat(get, test) {\n    return (obj, ctx)=>{\n        const nextObj = get(obj, ctx);\n        return nextObj && test(nextObj, ctx);\n    };\n}\nfunction leaf(pred) {\n    return (obj, ctx)=>pred(obj, ctx) != null;\n}\nfunction arborist(tree) {\n    const l1Predicates = Object.entries(tree).map(([l1, subtree])=>{\n        const l1Pred = (obj)=>obj[l1];\n        const l2Predicates = Object.entries(subtree).map(([l2, set])=>{\n            const l2Pred = (obj)=>obj[l2];\n            const l3Predicates = Array.from(set).map((l3)=>{\n                const l3Pred = l3 === \"me\" ? (obj, ctx)=>{\n                    const me = ctx.me.id;\n                    return testMaybeArray(obj, (u)=>u.id === me);\n                } : (obj)=>testMaybeArray(obj, (e)=>e[l3] || e.type === l3);\n                return l3Pred;\n            });\n            return l3Predicates.length === 0 ? leaf(l2Pred) : concat(l2Pred, l3Predicates.reduce(or));\n        });\n        return l2Predicates.length === 0 ? leaf(l1Pred) : concat(l1Pred, l2Predicates.reduce(or));\n    });\n    if (l1Predicates.length === 0) {\n        throw new Error(\"Cannot create filter function for empty query\");\n    }\n    return l1Predicates.reduce(or);\n}\nfunction testMaybeArray(t, pred) {\n    const p = (x)=>x != null && pred(x);\n    return Array.isArray(t) ? t.some(p) : p(t);\n}\nconst ENTITY_KEYS = {\n    mention: {},\n    hashtag: {},\n    cashtag: {},\n    bot_command: {},\n    url: {},\n    email: {},\n    phone_number: {},\n    bold: {},\n    italic: {},\n    underline: {},\n    strikethrough: {},\n    spoiler: {},\n    blockquote: {},\n    expandable_blockquote: {},\n    code: {},\n    pre: {},\n    text_link: {},\n    text_mention: {},\n    custom_emoji: {}\n};\nconst USER_KEYS = {\n    me: {},\n    is_bot: {},\n    is_premium: {},\n    added_to_attachment_menu: {}\n};\nconst FORWARD_ORIGIN_KEYS = {\n    user: {},\n    hidden_user: {},\n    chat: {},\n    channel: {}\n};\nconst STICKER_KEYS = {\n    is_video: {},\n    is_animated: {},\n    premium_animation: {}\n};\nconst REACTION_KEYS = {\n    emoji: {},\n    custom_emoji: {},\n    paid: {}\n};\nconst COMMON_MESSAGE_KEYS = {\n    forward_origin: FORWARD_ORIGIN_KEYS,\n    is_topic_message: {},\n    is_automatic_forward: {},\n    business_connection_id: {},\n    text: {},\n    animation: {},\n    audio: {},\n    document: {},\n    paid_media: {},\n    photo: {},\n    sticker: STICKER_KEYS,\n    story: {},\n    video: {},\n    video_note: {},\n    voice: {},\n    contact: {},\n    dice: {},\n    game: {},\n    poll: {},\n    venue: {},\n    location: {},\n    entities: ENTITY_KEYS,\n    caption_entities: ENTITY_KEYS,\n    caption: {},\n    effect_id: {},\n    has_media_spoiler: {},\n    new_chat_title: {},\n    new_chat_photo: {},\n    delete_chat_photo: {},\n    message_auto_delete_timer_changed: {},\n    pinned_message: {},\n    invoice: {},\n    proximity_alert_triggered: {},\n    chat_background_set: {},\n    giveaway_created: {},\n    giveaway: {\n        only_new_members: {},\n        has_public_winners: {}\n    },\n    giveaway_winners: {\n        only_new_members: {},\n        was_refunded: {}\n    },\n    giveaway_completed: {},\n    video_chat_scheduled: {},\n    video_chat_started: {},\n    video_chat_ended: {},\n    video_chat_participants_invited: {},\n    web_app_data: {}\n};\nconst MESSAGE_KEYS = {\n    ...COMMON_MESSAGE_KEYS,\n    new_chat_members: USER_KEYS,\n    left_chat_member: USER_KEYS,\n    group_chat_created: {},\n    supergroup_chat_created: {},\n    migrate_to_chat_id: {},\n    migrate_from_chat_id: {},\n    successful_payment: {},\n    refunded_payment: {},\n    users_shared: {},\n    chat_shared: {},\n    connected_website: {},\n    write_access_allowed: {},\n    passport_data: {},\n    boost_added: {},\n    forum_topic_created: {},\n    forum_topic_edited: {\n        name: {},\n        icon_custom_emoji_id: {}\n    },\n    forum_topic_closed: {},\n    forum_topic_reopened: {},\n    general_forum_topic_hidden: {},\n    general_forum_topic_unhidden: {},\n    sender_boost_count: {}\n};\nconst CHANNEL_POST_KEYS = {\n    ...COMMON_MESSAGE_KEYS,\n    channel_chat_created: {}\n};\nconst BUSINESS_CONNECTION_KEYS = {\n    can_reply: {},\n    is_enabled: {}\n};\nconst MESSAGE_REACTION_KEYS = {\n    old_reaction: REACTION_KEYS,\n    new_reaction: REACTION_KEYS\n};\nconst MESSAGE_REACTION_COUNT_UPDATED_KEYS = {\n    reactions: REACTION_KEYS\n};\nconst CALLBACK_QUERY_KEYS = {\n    data: {},\n    game_short_name: {}\n};\nconst CHAT_MEMBER_UPDATED_KEYS = {\n    from: USER_KEYS\n};\nconst UPDATE_KEYS = {\n    message: MESSAGE_KEYS,\n    edited_message: MESSAGE_KEYS,\n    channel_post: CHANNEL_POST_KEYS,\n    edited_channel_post: CHANNEL_POST_KEYS,\n    business_connection: BUSINESS_CONNECTION_KEYS,\n    business_message: MESSAGE_KEYS,\n    edited_business_message: MESSAGE_KEYS,\n    deleted_business_messages: {},\n    inline_query: {},\n    chosen_inline_result: {},\n    callback_query: CALLBACK_QUERY_KEYS,\n    shipping_query: {},\n    pre_checkout_query: {},\n    poll: {},\n    poll_answer: {},\n    my_chat_member: CHAT_MEMBER_UPDATED_KEYS,\n    chat_member: CHAT_MEMBER_UPDATED_KEYS,\n    chat_join_request: {},\n    message_reaction: MESSAGE_REACTION_KEYS,\n    message_reaction_count: MESSAGE_REACTION_COUNT_UPDATED_KEYS,\n    chat_boost: {},\n    removed_chat_boost: {},\n    purchased_paid_media: {}\n};\nconst L1_SHORTCUTS = {\n    \"\": [\n        \"message\",\n        \"channel_post\"\n    ],\n    msg: [\n        \"message\",\n        \"channel_post\"\n    ],\n    edit: [\n        \"edited_message\",\n        \"edited_channel_post\"\n    ]\n};\nconst L2_SHORTCUTS = {\n    \"\": [\n        \"entities\",\n        \"caption_entities\"\n    ],\n    media: [\n        \"photo\",\n        \"video\"\n    ],\n    file: [\n        \"photo\",\n        \"animation\",\n        \"audio\",\n        \"document\",\n        \"video\",\n        \"video_note\",\n        \"voice\",\n        \"sticker\"\n    ]\n};\nconst checker = {\n    filterQuery (filter) {\n        const pred = matchFilter(filter);\n        return (ctx)=>pred(ctx);\n    },\n    text (trigger) {\n        const hasText = checker.filterQuery([\n            \":text\",\n            \":caption\"\n        ]);\n        const trg = triggerFn(trigger);\n        return (ctx)=>{\n            if (!hasText(ctx)) return false;\n            const msg = ctx.message ?? ctx.channelPost;\n            const txt = msg.text ?? msg.caption;\n            return match(ctx, txt, trg);\n        };\n    },\n    command (command) {\n        const hasEntities = checker.filterQuery(\":entities:bot_command\");\n        const atCommands = new Set();\n        const noAtCommands = new Set();\n        toArray(command).forEach((cmd)=>{\n            if (cmd.startsWith(\"/\")) {\n                throw new Error(`Do not include '/' when registering command handlers (use '${cmd.substring(1)}' not '${cmd}')`);\n            }\n            const set = cmd.includes(\"@\") ? atCommands : noAtCommands;\n            set.add(cmd);\n        });\n        return (ctx)=>{\n            if (!hasEntities(ctx)) return false;\n            const msg = ctx.message ?? ctx.channelPost;\n            const txt = msg.text ?? msg.caption;\n            return msg.entities.some((e)=>{\n                if (e.type !== \"bot_command\") return false;\n                if (e.offset !== 0) return false;\n                const cmd = txt.substring(1, e.length);\n                if (noAtCommands.has(cmd) || atCommands.has(cmd)) {\n                    ctx.match = txt.substring(cmd.length + 1).trimStart();\n                    return true;\n                }\n                const index = cmd.indexOf(\"@\");\n                if (index === -1) return false;\n                const atTarget = cmd.substring(index + 1).toLowerCase();\n                const username = ctx.me.username.toLowerCase();\n                if (atTarget !== username) return false;\n                const atCommand = cmd.substring(0, index);\n                if (noAtCommands.has(atCommand)) {\n                    ctx.match = txt.substring(cmd.length + 1).trimStart();\n                    return true;\n                }\n                return false;\n            });\n        };\n    },\n    reaction (reaction) {\n        const hasMessageReaction = checker.filterQuery(\"message_reaction\");\n        const normalized = typeof reaction === \"string\" ? [\n            {\n                type: \"emoji\",\n                emoji: reaction\n            }\n        ] : (Array.isArray(reaction) ? reaction : [\n            reaction\n        ]).map((emoji)=>typeof emoji === \"string\" ? {\n                type: \"emoji\",\n                emoji\n            } : emoji);\n        const emoji = new Set(normalized.filter((r)=>r.type === \"emoji\").map((r)=>r.emoji));\n        const customEmoji = new Set(normalized.filter((r)=>r.type === \"custom_emoji\").map((r)=>r.custom_emoji_id));\n        const paid = normalized.some((r)=>r.type === \"paid\");\n        return (ctx)=>{\n            if (!hasMessageReaction(ctx)) return false;\n            const { old_reaction, new_reaction } = ctx.messageReaction;\n            for (const reaction of new_reaction){\n                let isOld = false;\n                if (reaction.type === \"emoji\") {\n                    for (const old of old_reaction){\n                        if (old.type !== \"emoji\") continue;\n                        if (old.emoji === reaction.emoji) {\n                            isOld = true;\n                            break;\n                        }\n                    }\n                } else if (reaction.type === \"custom_emoji\") {\n                    for (const old of old_reaction){\n                        if (old.type !== \"custom_emoji\") continue;\n                        if (old.custom_emoji_id === reaction.custom_emoji_id) {\n                            isOld = true;\n                            break;\n                        }\n                    }\n                } else if (reaction.type === \"paid\") {\n                    for (const old of old_reaction){\n                        if (old.type !== \"paid\") continue;\n                        isOld = true;\n                        break;\n                    }\n                } else {}\n                if (isOld) continue;\n                if (reaction.type === \"emoji\") {\n                    if (emoji.has(reaction.emoji)) return true;\n                } else if (reaction.type === \"custom_emoji\") {\n                    if (customEmoji.has(reaction.custom_emoji_id)) return true;\n                } else if (reaction.type === \"paid\") {\n                    if (paid) return true;\n                } else {\n                    return true;\n                }\n            }\n            return false;\n        };\n    },\n    chatType (chatType) {\n        const set = new Set(toArray(chatType));\n        return (ctx)=>ctx.chat?.type !== undefined && set.has(ctx.chat.type);\n    },\n    callbackQuery (trigger) {\n        const hasCallbackQuery = checker.filterQuery(\"callback_query:data\");\n        const trg = triggerFn(trigger);\n        return (ctx)=>hasCallbackQuery(ctx) && match(ctx, ctx.callbackQuery.data, trg);\n    },\n    gameQuery (trigger) {\n        const hasGameQuery = checker.filterQuery(\"callback_query:game_short_name\");\n        const trg = triggerFn(trigger);\n        return (ctx)=>hasGameQuery(ctx) && match(ctx, ctx.callbackQuery.game_short_name, trg);\n    },\n    inlineQuery (trigger) {\n        const hasInlineQuery = checker.filterQuery(\"inline_query\");\n        const trg = triggerFn(trigger);\n        return (ctx)=>hasInlineQuery(ctx) && match(ctx, ctx.inlineQuery.query, trg);\n    },\n    chosenInlineResult (trigger) {\n        const hasChosenInlineResult = checker.filterQuery(\"chosen_inline_result\");\n        const trg = triggerFn(trigger);\n        return (ctx)=>hasChosenInlineResult(ctx) && match(ctx, ctx.chosenInlineResult.result_id, trg);\n    },\n    preCheckoutQuery (trigger) {\n        const hasPreCheckoutQuery = checker.filterQuery(\"pre_checkout_query\");\n        const trg = triggerFn(trigger);\n        return (ctx)=>hasPreCheckoutQuery(ctx) && match(ctx, ctx.preCheckoutQuery.invoice_payload, trg);\n    },\n    shippingQuery (trigger) {\n        const hasShippingQuery = checker.filterQuery(\"shipping_query\");\n        const trg = triggerFn(trigger);\n        return (ctx)=>hasShippingQuery(ctx) && match(ctx, ctx.shippingQuery.invoice_payload, trg);\n    }\n};\nclass Context {\n    update;\n    api;\n    me;\n    match;\n    constructor(update, api, me){\n        this.update = update;\n        this.api = api;\n        this.me = me;\n    }\n    get message() {\n        return this.update.message;\n    }\n    get editedMessage() {\n        return this.update.edited_message;\n    }\n    get channelPost() {\n        return this.update.channel_post;\n    }\n    get editedChannelPost() {\n        return this.update.edited_channel_post;\n    }\n    get businessConnection() {\n        return this.update.business_connection;\n    }\n    get businessMessage() {\n        return this.update.business_message;\n    }\n    get editedBusinessMessage() {\n        return this.update.edited_business_message;\n    }\n    get deletedBusinessMessages() {\n        return this.update.deleted_business_messages;\n    }\n    get messageReaction() {\n        return this.update.message_reaction;\n    }\n    get messageReactionCount() {\n        return this.update.message_reaction_count;\n    }\n    get inlineQuery() {\n        return this.update.inline_query;\n    }\n    get chosenInlineResult() {\n        return this.update.chosen_inline_result;\n    }\n    get callbackQuery() {\n        return this.update.callback_query;\n    }\n    get shippingQuery() {\n        return this.update.shipping_query;\n    }\n    get preCheckoutQuery() {\n        return this.update.pre_checkout_query;\n    }\n    get poll() {\n        return this.update.poll;\n    }\n    get pollAnswer() {\n        return this.update.poll_answer;\n    }\n    get myChatMember() {\n        return this.update.my_chat_member;\n    }\n    get chatMember() {\n        return this.update.chat_member;\n    }\n    get chatJoinRequest() {\n        return this.update.chat_join_request;\n    }\n    get chatBoost() {\n        return this.update.chat_boost;\n    }\n    get removedChatBoost() {\n        return this.update.removed_chat_boost;\n    }\n    get purchasedPaidMedia() {\n        return this.update.purchased_paid_media;\n    }\n    get msg() {\n        return this.message ?? this.editedMessage ?? this.channelPost ?? this.editedChannelPost ?? this.businessMessage ?? this.editedBusinessMessage ?? this.callbackQuery?.message;\n    }\n    get chat() {\n        return (this.msg ?? this.deletedBusinessMessages ?? this.messageReaction ?? this.messageReactionCount ?? this.myChatMember ?? this.chatMember ?? this.chatJoinRequest ?? this.chatBoost ?? this.removedChatBoost)?.chat;\n    }\n    get senderChat() {\n        return this.msg?.sender_chat;\n    }\n    get from() {\n        return (this.businessConnection ?? this.messageReaction ?? (this.chatBoost?.boost ?? this.removedChatBoost)?.source)?.user ?? (this.callbackQuery ?? this.msg ?? this.inlineQuery ?? this.chosenInlineResult ?? this.shippingQuery ?? this.preCheckoutQuery ?? this.myChatMember ?? this.chatMember ?? this.chatJoinRequest ?? this.purchasedPaidMedia)?.from;\n    }\n    get msgId() {\n        return this.msg?.message_id ?? this.messageReaction?.message_id ?? this.messageReactionCount?.message_id;\n    }\n    get chatId() {\n        return this.chat?.id ?? this.businessConnection?.user_chat_id;\n    }\n    get inlineMessageId() {\n        return this.callbackQuery?.inline_message_id ?? this.chosenInlineResult?.inline_message_id;\n    }\n    get businessConnectionId() {\n        return this.msg?.business_connection_id ?? this.businessConnection?.id ?? this.deletedBusinessMessages?.business_connection_id;\n    }\n    entities(types) {\n        const message = this.msg;\n        if (message === undefined) return [];\n        const text = message.text ?? message.caption;\n        if (text === undefined) return [];\n        let entities = message.entities ?? message.caption_entities;\n        if (entities === undefined) return [];\n        if (types !== undefined) {\n            const filters = new Set(toArray(types));\n            entities = entities.filter((entity)=>filters.has(entity.type));\n        }\n        return entities.map((entity)=>({\n                ...entity,\n                text: text.substring(entity.offset, entity.offset + entity.length)\n            }));\n    }\n    reactions() {\n        const emoji = [];\n        const emojiAdded = [];\n        const emojiKept = [];\n        const emojiRemoved = [];\n        const customEmoji = [];\n        const customEmojiAdded = [];\n        const customEmojiKept = [];\n        const customEmojiRemoved = [];\n        let paid = false;\n        let paidAdded = false;\n        const r = this.messageReaction;\n        if (r !== undefined) {\n            const { old_reaction, new_reaction } = r;\n            for (const reaction of new_reaction){\n                if (reaction.type === \"emoji\") {\n                    emoji.push(reaction.emoji);\n                } else if (reaction.type === \"custom_emoji\") {\n                    customEmoji.push(reaction.custom_emoji_id);\n                } else if (reaction.type === \"paid\") {\n                    paid = paidAdded = true;\n                }\n            }\n            for (const reaction of old_reaction){\n                if (reaction.type === \"emoji\") {\n                    emojiRemoved.push(reaction.emoji);\n                } else if (reaction.type === \"custom_emoji\") {\n                    customEmojiRemoved.push(reaction.custom_emoji_id);\n                } else if (reaction.type === \"paid\") {\n                    paidAdded = false;\n                }\n            }\n            emojiAdded.push(...emoji);\n            customEmojiAdded.push(...customEmoji);\n            for(let i = 0; i < emojiRemoved.length; i++){\n                const len = emojiAdded.length;\n                if (len === 0) break;\n                const rem = emojiRemoved[i];\n                for(let j = 0; j < len; j++){\n                    if (rem === emojiAdded[j]) {\n                        emojiKept.push(rem);\n                        emojiRemoved.splice(i, 1);\n                        emojiAdded.splice(j, 1);\n                        i--;\n                        break;\n                    }\n                }\n            }\n            for(let i = 0; i < customEmojiRemoved.length; i++){\n                const len = customEmojiAdded.length;\n                if (len === 0) break;\n                const rem = customEmojiRemoved[i];\n                for(let j = 0; j < len; j++){\n                    if (rem === customEmojiAdded[j]) {\n                        customEmojiKept.push(rem);\n                        customEmojiRemoved.splice(i, 1);\n                        customEmojiAdded.splice(j, 1);\n                        i--;\n                        break;\n                    }\n                }\n            }\n        }\n        return {\n            emoji,\n            emojiAdded,\n            emojiKept,\n            emojiRemoved,\n            customEmoji,\n            customEmojiAdded,\n            customEmojiKept,\n            customEmojiRemoved,\n            paid,\n            paidAdded\n        };\n    }\n    static has = checker;\n    has(filter) {\n        return Context.has.filterQuery(filter)(this);\n    }\n    hasText(trigger) {\n        return Context.has.text(trigger)(this);\n    }\n    hasCommand(command) {\n        return Context.has.command(command)(this);\n    }\n    hasReaction(reaction) {\n        return Context.has.reaction(reaction)(this);\n    }\n    hasChatType(chatType) {\n        return Context.has.chatType(chatType)(this);\n    }\n    hasCallbackQuery(trigger) {\n        return Context.has.callbackQuery(trigger)(this);\n    }\n    hasGameQuery(trigger) {\n        return Context.has.gameQuery(trigger)(this);\n    }\n    hasInlineQuery(trigger) {\n        return Context.has.inlineQuery(trigger)(this);\n    }\n    hasChosenInlineResult(trigger) {\n        return Context.has.chosenInlineResult(trigger)(this);\n    }\n    hasPreCheckoutQuery(trigger) {\n        return Context.has.preCheckoutQuery(trigger)(this);\n    }\n    hasShippingQuery(trigger) {\n        return Context.has.shippingQuery(trigger)(this);\n    }\n    reply(text, other, signal) {\n        return this.api.sendMessage(orThrow(this.chatId, \"sendMessage\"), text, {\n            business_connection_id: this.businessConnectionId,\n            ...other\n        }, signal);\n    }\n    forwardMessage(chat_id, other, signal) {\n        return this.api.forwardMessage(chat_id, orThrow(this.chatId, \"forwardMessage\"), orThrow(this.msgId, \"forwardMessage\"), other, signal);\n    }\n    forwardMessages(chat_id, message_ids, other, signal) {\n        return this.api.forwardMessages(chat_id, orThrow(this.chatId, \"forwardMessages\"), message_ids, other, signal);\n    }\n    copyMessage(chat_id, other, signal) {\n        return this.api.copyMessage(chat_id, orThrow(this.chatId, \"copyMessage\"), orThrow(this.msgId, \"copyMessage\"), other, signal);\n    }\n    copyMessages(chat_id, message_ids, other, signal) {\n        return this.api.copyMessages(chat_id, orThrow(this.chatId, \"copyMessages\"), message_ids, other, signal);\n    }\n    replyWithPhoto(photo, other, signal) {\n        return this.api.sendPhoto(orThrow(this.chatId, \"sendPhoto\"), photo, {\n            business_connection_id: this.businessConnectionId,\n            ...other\n        }, signal);\n    }\n    replyWithAudio(audio, other, signal) {\n        return this.api.sendAudio(orThrow(this.chatId, \"sendAudio\"), audio, {\n            business_connection_id: this.businessConnectionId,\n            ...other\n        }, signal);\n    }\n    replyWithDocument(document1, other, signal) {\n        return this.api.sendDocument(orThrow(this.chatId, \"sendDocument\"), document1, {\n            business_connection_id: this.businessConnectionId,\n            ...other\n        }, signal);\n    }\n    replyWithVideo(video, other, signal) {\n        return this.api.sendVideo(orThrow(this.chatId, \"sendVideo\"), video, {\n            business_connection_id: this.businessConnectionId,\n            ...other\n        }, signal);\n    }\n    replyWithAnimation(animation, other, signal) {\n        return this.api.sendAnimation(orThrow(this.chatId, \"sendAnimation\"), animation, {\n            business_connection_id: this.businessConnectionId,\n            ...other\n        }, signal);\n    }\n    replyWithVoice(voice, other, signal) {\n        return this.api.sendVoice(orThrow(this.chatId, \"sendVoice\"), voice, {\n            business_connection_id: this.businessConnectionId,\n            ...other\n        }, signal);\n    }\n    replyWithVideoNote(video_note, other, signal) {\n        return this.api.sendVideoNote(orThrow(this.chatId, \"sendVideoNote\"), video_note, {\n            business_connection_id: this.businessConnectionId,\n            ...other\n        }, signal);\n    }\n    replyWithMediaGroup(media, other, signal) {\n        return this.api.sendMediaGroup(orThrow(this.chatId, \"sendMediaGroup\"), media, {\n            business_connection_id: this.businessConnectionId,\n            ...other\n        }, signal);\n    }\n    replyWithLocation(latitude, longitude, other, signal) {\n        return this.api.sendLocation(orThrow(this.chatId, \"sendLocation\"), latitude, longitude, {\n            business_connection_id: this.businessConnectionId,\n            ...other\n        }, signal);\n    }\n    editMessageLiveLocation(latitude, longitude, other, signal) {\n        const inlineId = this.inlineMessageId;\n        return inlineId !== undefined ? this.api.editMessageLiveLocationInline(inlineId, latitude, longitude, other) : this.api.editMessageLiveLocation(orThrow(this.chatId, \"editMessageLiveLocation\"), orThrow(this.msgId, \"editMessageLiveLocation\"), latitude, longitude, other, signal);\n    }\n    stopMessageLiveLocation(other, signal) {\n        const inlineId = this.inlineMessageId;\n        return inlineId !== undefined ? this.api.stopMessageLiveLocationInline(inlineId, other) : this.api.stopMessageLiveLocation(orThrow(this.chatId, \"stopMessageLiveLocation\"), orThrow(this.msgId, \"stopMessageLiveLocation\"), other, signal);\n    }\n    sendPaidMedia(star_count, media, other, signal) {\n        return this.api.sendPaidMedia(orThrow(this.chatId, \"sendPaidMedia\"), star_count, media, other, signal);\n    }\n    replyWithVenue(latitude, longitude, title, address, other, signal) {\n        return this.api.sendVenue(orThrow(this.chatId, \"sendVenue\"), latitude, longitude, title, address, {\n            business_connection_id: this.businessConnectionId,\n            ...other\n        }, signal);\n    }\n    replyWithContact(phone_number, first_name, other, signal) {\n        return this.api.sendContact(orThrow(this.chatId, \"sendContact\"), phone_number, first_name, {\n            business_connection_id: this.businessConnectionId,\n            ...other\n        }, signal);\n    }\n    replyWithPoll(question, options, other, signal) {\n        return this.api.sendPoll(orThrow(this.chatId, \"sendPoll\"), question, options, {\n            business_connection_id: this.businessConnectionId,\n            ...other\n        }, signal);\n    }\n    replyWithDice(emoji, other, signal) {\n        return this.api.sendDice(orThrow(this.chatId, \"sendDice\"), emoji, {\n            business_connection_id: this.businessConnectionId,\n            ...other\n        }, signal);\n    }\n    replyWithChatAction(action, other, signal) {\n        return this.api.sendChatAction(orThrow(this.chatId, \"sendChatAction\"), action, {\n            business_connection_id: this.businessConnectionId,\n            ...other\n        }, signal);\n    }\n    react(reaction, other, signal) {\n        return this.api.setMessageReaction(orThrow(this.chatId, \"setMessageReaction\"), orThrow(this.msgId, \"setMessageReaction\"), typeof reaction === \"string\" ? [\n            {\n                type: \"emoji\",\n                emoji: reaction\n            }\n        ] : (Array.isArray(reaction) ? reaction : [\n            reaction\n        ]).map((emoji)=>typeof emoji === \"string\" ? {\n                type: \"emoji\",\n                emoji\n            } : emoji), other, signal);\n    }\n    getUserProfilePhotos(other, signal) {\n        return this.api.getUserProfilePhotos(orThrow(this.from, \"getUserProfilePhotos\").id, other, signal);\n    }\n    getUserChatBoosts(chat_id, signal) {\n        return this.api.getUserChatBoosts(chat_id, orThrow(this.from, \"getUserChatBoosts\").id, signal);\n    }\n    getBusinessConnection(signal) {\n        return this.api.getBusinessConnection(orThrow(this.businessConnectionId, \"getBusinessConnection\"), signal);\n    }\n    getFile(signal) {\n        const m = orThrow(this.msg, \"getFile\");\n        const file = m.photo !== undefined ? m.photo[m.photo.length - 1] : m.animation ?? m.audio ?? m.document ?? m.video ?? m.video_note ?? m.voice ?? m.sticker;\n        return this.api.getFile(orThrow(file, \"getFile\").file_id, signal);\n    }\n    kickAuthor(...args) {\n        return this.banAuthor(...args);\n    }\n    banAuthor(other, signal) {\n        return this.api.banChatMember(orThrow(this.chatId, \"banAuthor\"), orThrow(this.from, \"banAuthor\").id, other, signal);\n    }\n    kickChatMember(...args) {\n        return this.banChatMember(...args);\n    }\n    banChatMember(user_id, other, signal) {\n        return this.api.banChatMember(orThrow(this.chatId, \"banChatMember\"), user_id, other, signal);\n    }\n    unbanChatMember(user_id, other, signal) {\n        return this.api.unbanChatMember(orThrow(this.chatId, \"unbanChatMember\"), user_id, other, signal);\n    }\n    restrictAuthor(permissions, other, signal) {\n        return this.api.restrictChatMember(orThrow(this.chatId, \"restrictAuthor\"), orThrow(this.from, \"restrictAuthor\").id, permissions, other, signal);\n    }\n    restrictChatMember(user_id, permissions, other, signal) {\n        return this.api.restrictChatMember(orThrow(this.chatId, \"restrictChatMember\"), user_id, permissions, other, signal);\n    }\n    promoteAuthor(other, signal) {\n        return this.api.promoteChatMember(orThrow(this.chatId, \"promoteAuthor\"), orThrow(this.from, \"promoteAuthor\").id, other, signal);\n    }\n    promoteChatMember(user_id, other, signal) {\n        return this.api.promoteChatMember(orThrow(this.chatId, \"promoteChatMember\"), user_id, other, signal);\n    }\n    setChatAdministratorAuthorCustomTitle(custom_title, signal) {\n        return this.api.setChatAdministratorCustomTitle(orThrow(this.chatId, \"setChatAdministratorAuthorCustomTitle\"), orThrow(this.from, \"setChatAdministratorAuthorCustomTitle\").id, custom_title, signal);\n    }\n    setChatAdministratorCustomTitle(user_id, custom_title, signal) {\n        return this.api.setChatAdministratorCustomTitle(orThrow(this.chatId, \"setChatAdministratorCustomTitle\"), user_id, custom_title, signal);\n    }\n    banChatSenderChat(sender_chat_id, signal) {\n        return this.api.banChatSenderChat(orThrow(this.chatId, \"banChatSenderChat\"), sender_chat_id, signal);\n    }\n    unbanChatSenderChat(sender_chat_id, signal) {\n        return this.api.unbanChatSenderChat(orThrow(this.chatId, \"unbanChatSenderChat\"), sender_chat_id, signal);\n    }\n    setChatPermissions(permissions, other, signal) {\n        return this.api.setChatPermissions(orThrow(this.chatId, \"setChatPermissions\"), permissions, other, signal);\n    }\n    exportChatInviteLink(signal) {\n        return this.api.exportChatInviteLink(orThrow(this.chatId, \"exportChatInviteLink\"), signal);\n    }\n    createChatInviteLink(other, signal) {\n        return this.api.createChatInviteLink(orThrow(this.chatId, \"createChatInviteLink\"), other, signal);\n    }\n    editChatInviteLink(invite_link, other, signal) {\n        return this.api.editChatInviteLink(orThrow(this.chatId, \"editChatInviteLink\"), invite_link, other, signal);\n    }\n    createChatSubscriptionInviteLink(subscription_period, subscription_price, other, signal) {\n        return this.api.createChatSubscriptionInviteLink(orThrow(this.chatId, \"createChatSubscriptionInviteLink\"), subscription_period, subscription_price, other, signal);\n    }\n    editChatSubscriptionInviteLink(invite_link, other, signal) {\n        return this.api.editChatSubscriptionInviteLink(orThrow(this.chatId, \"editChatSubscriptionInviteLink\"), invite_link, other, signal);\n    }\n    revokeChatInviteLink(invite_link, signal) {\n        return this.api.revokeChatInviteLink(orThrow(this.chatId, \"editChatInviteLink\"), invite_link, signal);\n    }\n    approveChatJoinRequest(user_id, signal) {\n        return this.api.approveChatJoinRequest(orThrow(this.chatId, \"approveChatJoinRequest\"), user_id, signal);\n    }\n    declineChatJoinRequest(user_id, signal) {\n        return this.api.declineChatJoinRequest(orThrow(this.chatId, \"declineChatJoinRequest\"), user_id, signal);\n    }\n    setChatPhoto(photo, signal) {\n        return this.api.setChatPhoto(orThrow(this.chatId, \"setChatPhoto\"), photo, signal);\n    }\n    deleteChatPhoto(signal) {\n        return this.api.deleteChatPhoto(orThrow(this.chatId, \"deleteChatPhoto\"), signal);\n    }\n    setChatTitle(title, signal) {\n        return this.api.setChatTitle(orThrow(this.chatId, \"setChatTitle\"), title, signal);\n    }\n    setChatDescription(description, signal) {\n        return this.api.setChatDescription(orThrow(this.chatId, \"setChatDescription\"), description, signal);\n    }\n    pinChatMessage(message_id, other, signal) {\n        return this.api.pinChatMessage(orThrow(this.chatId, \"pinChatMessage\"), message_id, other, signal);\n    }\n    unpinChatMessage(message_id, signal) {\n        return this.api.unpinChatMessage(orThrow(this.chatId, \"unpinChatMessage\"), message_id, signal);\n    }\n    unpinAllChatMessages(signal) {\n        return this.api.unpinAllChatMessages(orThrow(this.chatId, \"unpinAllChatMessages\"), signal);\n    }\n    leaveChat(signal) {\n        return this.api.leaveChat(orThrow(this.chatId, \"leaveChat\"), signal);\n    }\n    getChat(signal) {\n        return this.api.getChat(orThrow(this.chatId, \"getChat\"), signal);\n    }\n    getChatAdministrators(signal) {\n        return this.api.getChatAdministrators(orThrow(this.chatId, \"getChatAdministrators\"), signal);\n    }\n    getChatMembersCount(...args) {\n        return this.getChatMemberCount(...args);\n    }\n    getChatMemberCount(signal) {\n        return this.api.getChatMemberCount(orThrow(this.chatId, \"getChatMemberCount\"), signal);\n    }\n    getAuthor(signal) {\n        return this.api.getChatMember(orThrow(this.chatId, \"getAuthor\"), orThrow(this.from, \"getAuthor\").id, signal);\n    }\n    getChatMember(user_id, signal) {\n        return this.api.getChatMember(orThrow(this.chatId, \"getChatMember\"), user_id, signal);\n    }\n    setChatStickerSet(sticker_set_name, signal) {\n        return this.api.setChatStickerSet(orThrow(this.chatId, \"setChatStickerSet\"), sticker_set_name, signal);\n    }\n    deleteChatStickerSet(signal) {\n        return this.api.deleteChatStickerSet(orThrow(this.chatId, \"deleteChatStickerSet\"), signal);\n    }\n    createForumTopic(name, other, signal) {\n        return this.api.createForumTopic(orThrow(this.chatId, \"createForumTopic\"), name, other, signal);\n    }\n    editForumTopic(other, signal) {\n        const message = orThrow(this.msg, \"editForumTopic\");\n        const thread = orThrow(message.message_thread_id, \"editForumTopic\");\n        return this.api.editForumTopic(message.chat.id, thread, other, signal);\n    }\n    closeForumTopic(signal) {\n        const message = orThrow(this.msg, \"closeForumTopic\");\n        const thread = orThrow(message.message_thread_id, \"closeForumTopic\");\n        return this.api.closeForumTopic(message.chat.id, thread, signal);\n    }\n    reopenForumTopic(signal) {\n        const message = orThrow(this.msg, \"reopenForumTopic\");\n        const thread = orThrow(message.message_thread_id, \"reopenForumTopic\");\n        return this.api.reopenForumTopic(message.chat.id, thread, signal);\n    }\n    deleteForumTopic(signal) {\n        const message = orThrow(this.msg, \"deleteForumTopic\");\n        const thread = orThrow(message.message_thread_id, \"deleteForumTopic\");\n        return this.api.deleteForumTopic(message.chat.id, thread, signal);\n    }\n    unpinAllForumTopicMessages(signal) {\n        const message = orThrow(this.msg, \"unpinAllForumTopicMessages\");\n        const thread = orThrow(message.message_thread_id, \"unpinAllForumTopicMessages\");\n        return this.api.unpinAllForumTopicMessages(message.chat.id, thread, signal);\n    }\n    editGeneralForumTopic(name, signal) {\n        return this.api.editGeneralForumTopic(orThrow(this.chatId, \"editGeneralForumTopic\"), name, signal);\n    }\n    closeGeneralForumTopic(signal) {\n        return this.api.closeGeneralForumTopic(orThrow(this.chatId, \"closeGeneralForumTopic\"), signal);\n    }\n    reopenGeneralForumTopic(signal) {\n        return this.api.reopenGeneralForumTopic(orThrow(this.chatId, \"reopenGeneralForumTopic\"), signal);\n    }\n    hideGeneralForumTopic(signal) {\n        return this.api.hideGeneralForumTopic(orThrow(this.chatId, \"hideGeneralForumTopic\"), signal);\n    }\n    unhideGeneralForumTopic(signal) {\n        return this.api.unhideGeneralForumTopic(orThrow(this.chatId, \"unhideGeneralForumTopic\"), signal);\n    }\n    unpinAllGeneralForumTopicMessages(signal) {\n        return this.api.unpinAllGeneralForumTopicMessages(orThrow(this.chatId, \"unpinAllGeneralForumTopicMessages\"), signal);\n    }\n    answerCallbackQuery(other, signal) {\n        return this.api.answerCallbackQuery(orThrow(this.callbackQuery, \"answerCallbackQuery\").id, typeof other === \"string\" ? {\n            text: other\n        } : other, signal);\n    }\n    setChatMenuButton(other, signal) {\n        return this.api.setChatMenuButton(other, signal);\n    }\n    getChatMenuButton(other, signal) {\n        return this.api.getChatMenuButton(other, signal);\n    }\n    setMyDefaultAdministratorRights(other, signal) {\n        return this.api.setMyDefaultAdministratorRights(other, signal);\n    }\n    getMyDefaultAdministratorRights(other, signal) {\n        return this.api.getMyDefaultAdministratorRights(other, signal);\n    }\n    editMessageText(text, other, signal) {\n        const inlineId = this.inlineMessageId;\n        return inlineId !== undefined ? this.api.editMessageTextInline(inlineId, text, other) : this.api.editMessageText(orThrow(this.chatId, \"editMessageText\"), orThrow(this.msg?.message_id ?? this.messageReaction?.message_id ?? this.messageReactionCount?.message_id, \"editMessageText\"), text, other, signal);\n    }\n    editMessageCaption(other, signal) {\n        const inlineId = this.inlineMessageId;\n        return inlineId !== undefined ? this.api.editMessageCaptionInline(inlineId, other) : this.api.editMessageCaption(orThrow(this.chatId, \"editMessageCaption\"), orThrow(this.msg?.message_id ?? this.messageReaction?.message_id ?? this.messageReactionCount?.message_id, \"editMessageCaption\"), other, signal);\n    }\n    editMessageMedia(media, other, signal) {\n        const inlineId = this.inlineMessageId;\n        return inlineId !== undefined ? this.api.editMessageMediaInline(inlineId, media, other) : this.api.editMessageMedia(orThrow(this.chatId, \"editMessageMedia\"), orThrow(this.msg?.message_id ?? this.messageReaction?.message_id ?? this.messageReactionCount?.message_id, \"editMessageMedia\"), media, other, signal);\n    }\n    editMessageReplyMarkup(other, signal) {\n        const inlineId = this.inlineMessageId;\n        return inlineId !== undefined ? this.api.editMessageReplyMarkupInline(inlineId, other) : this.api.editMessageReplyMarkup(orThrow(this.chatId, \"editMessageReplyMarkup\"), orThrow(this.msg?.message_id ?? this.messageReaction?.message_id ?? this.messageReactionCount?.message_id, \"editMessageReplyMarkup\"), other, signal);\n    }\n    stopPoll(other, signal) {\n        return this.api.stopPoll(orThrow(this.chatId, \"stopPoll\"), orThrow(this.msg?.message_id ?? this.messageReaction?.message_id ?? this.messageReactionCount?.message_id, \"stopPoll\"), other, signal);\n    }\n    deleteMessage(signal) {\n        return this.api.deleteMessage(orThrow(this.chatId, \"deleteMessage\"), orThrow(this.msg?.message_id ?? this.messageReaction?.message_id ?? this.messageReactionCount?.message_id, \"deleteMessage\"), signal);\n    }\n    deleteMessages(message_ids, signal) {\n        return this.api.deleteMessages(orThrow(this.chatId, \"deleteMessages\"), message_ids, signal);\n    }\n    replyWithSticker(sticker, other, signal) {\n        return this.api.sendSticker(orThrow(this.chatId, \"sendSticker\"), sticker, {\n            business_connection_id: this.businessConnectionId,\n            ...other\n        }, signal);\n    }\n    getCustomEmojiStickers(signal) {\n        return this.api.getCustomEmojiStickers((this.msg?.entities ?? []).filter((e)=>e.type === \"custom_emoji\").map((e)=>e.custom_emoji_id), signal);\n    }\n    answerInlineQuery(results, other, signal) {\n        return this.api.answerInlineQuery(orThrow(this.inlineQuery, \"answerInlineQuery\").id, results, other, signal);\n    }\n    replyWithInvoice(title, description, payload, currency, prices, other, signal) {\n        return this.api.sendInvoice(orThrow(this.chatId, \"sendInvoice\"), title, description, payload, currency, prices, other, signal);\n    }\n    answerShippingQuery(ok, other, signal) {\n        return this.api.answerShippingQuery(orThrow(this.shippingQuery, \"answerShippingQuery\").id, ok, other, signal);\n    }\n    answerPreCheckoutQuery(ok, other, signal) {\n        return this.api.answerPreCheckoutQuery(orThrow(this.preCheckoutQuery, \"answerPreCheckoutQuery\").id, ok, typeof other === \"string\" ? {\n            error_message: other\n        } : other, signal);\n    }\n    refundStarPayment(signal) {\n        return this.api.refundStarPayment(orThrow(this.from, \"refundStarPayment\").id, orThrow(this.msg?.successful_payment, \"refundStarPayment\").telegram_payment_charge_id, signal);\n    }\n    setPassportDataErrors(errors, signal) {\n        return this.api.setPassportDataErrors(orThrow(this.from, \"setPassportDataErrors\").id, errors, signal);\n    }\n    replyWithGame(game_short_name, other, signal) {\n        return this.api.sendGame(orThrow(this.chatId, \"sendGame\"), game_short_name, {\n            business_connection_id: this.businessConnectionId,\n            ...other\n        }, signal);\n    }\n}\nfunction orThrow(value, method) {\n    if (value === undefined) {\n        throw new Error(`Missing information for API call to ${method}`);\n    }\n    return value;\n}\nfunction triggerFn(trigger) {\n    return toArray(trigger).map((t)=>typeof t === \"string\" ? (txt)=>txt === t ? t : null : (txt)=>txt.match(t));\n}\nfunction match(ctx, content, triggers) {\n    for (const t of triggers){\n        const res = t(content);\n        if (res) {\n            ctx.match = res;\n            return true;\n        }\n    }\n    return false;\n}\nfunction toArray(e) {\n    return Array.isArray(e) ? e : [\n        e\n    ];\n}\nclass BotError extends Error {\n    error;\n    ctx;\n    constructor(error, ctx){\n        super(generateBotErrorMessage(error));\n        this.error = error;\n        this.ctx = ctx;\n        this.name = \"BotError\";\n        if (error instanceof Error) this.stack = error.stack;\n    }\n}\nfunction generateBotErrorMessage(error) {\n    let msg;\n    if (error instanceof Error) {\n        msg = `${error.name} in middleware: ${error.message}`;\n    } else {\n        const type = typeof error;\n        msg = `Non-error value of type ${type} thrown in middleware`;\n        switch(type){\n            case \"bigint\":\n            case \"boolean\":\n            case \"number\":\n            case \"symbol\":\n                msg += `: ${error}`;\n                break;\n            case \"string\":\n                msg += `: ${String(error).substring(0, 50)}`;\n                break;\n            default:\n                msg += \"!\";\n                break;\n        }\n    }\n    return msg;\n}\nfunction flatten(mw) {\n    return typeof mw === \"function\" ? mw : (ctx, next)=>mw.middleware()(ctx, next);\n}\nfunction concat1(first, andThen) {\n    return async (ctx, next)=>{\n        let nextCalled = false;\n        await first(ctx, async ()=>{\n            if (nextCalled) throw new Error(\"`next` already called before!\");\n            else nextCalled = true;\n            await andThen(ctx, next);\n        });\n    };\n}\nfunction pass(_ctx, next) {\n    return next();\n}\nconst leaf1 = ()=>Promise.resolve();\nasync function run(middleware, ctx) {\n    await middleware(ctx, leaf1);\n}\nclass Composer {\n    handler;\n    constructor(...middleware){\n        this.handler = middleware.length === 0 ? pass : middleware.map(flatten).reduce(concat1);\n    }\n    middleware() {\n        return this.handler;\n    }\n    use(...middleware) {\n        const composer = new Composer(...middleware);\n        this.handler = concat1(this.handler, flatten(composer));\n        return composer;\n    }\n    on(filter, ...middleware) {\n        return this.filter(Context.has.filterQuery(filter), ...middleware);\n    }\n    hears(trigger, ...middleware) {\n        return this.filter(Context.has.text(trigger), ...middleware);\n    }\n    command(command, ...middleware) {\n        return this.filter(Context.has.command(command), ...middleware);\n    }\n    reaction(reaction, ...middleware) {\n        return this.filter(Context.has.reaction(reaction), ...middleware);\n    }\n    chatType(chatType, ...middleware) {\n        return this.filter(Context.has.chatType(chatType), ...middleware);\n    }\n    callbackQuery(trigger, ...middleware) {\n        return this.filter(Context.has.callbackQuery(trigger), ...middleware);\n    }\n    gameQuery(trigger, ...middleware) {\n        return this.filter(Context.has.gameQuery(trigger), ...middleware);\n    }\n    inlineQuery(trigger, ...middleware) {\n        return this.filter(Context.has.inlineQuery(trigger), ...middleware);\n    }\n    chosenInlineResult(resultId, ...middleware) {\n        return this.filter(Context.has.chosenInlineResult(resultId), ...middleware);\n    }\n    preCheckoutQuery(trigger, ...middleware) {\n        return this.filter(Context.has.preCheckoutQuery(trigger), ...middleware);\n    }\n    shippingQuery(trigger, ...middleware) {\n        return this.filter(Context.has.shippingQuery(trigger), ...middleware);\n    }\n    filter(predicate, ...middleware) {\n        const composer = new Composer(...middleware);\n        this.branch(predicate, composer, pass);\n        return composer;\n    }\n    drop(predicate, ...middleware) {\n        return this.filter(async (ctx)=>!await predicate(ctx), ...middleware);\n    }\n    fork(...middleware) {\n        const composer = new Composer(...middleware);\n        const fork = flatten(composer);\n        this.use((ctx, next)=>Promise.all([\n                next(),\n                run(fork, ctx)\n            ]));\n        return composer;\n    }\n    lazy(middlewareFactory) {\n        return this.use(async (ctx, next)=>{\n            const middleware = await middlewareFactory(ctx);\n            const arr = Array.isArray(middleware) ? middleware : [\n                middleware\n            ];\n            await flatten(new Composer(...arr))(ctx, next);\n        });\n    }\n    route(router, routeHandlers, fallback = pass) {\n        return this.lazy(async (ctx)=>{\n            const route = await router(ctx);\n            return (route === undefined || !routeHandlers[route] ? fallback : routeHandlers[route]) ?? [];\n        });\n    }\n    branch(predicate, trueMiddleware, falseMiddleware) {\n        return this.lazy(async (ctx)=>await predicate(ctx) ? trueMiddleware : falseMiddleware);\n    }\n    errorBoundary(errorHandler, ...middleware) {\n        const composer = new Composer(...middleware);\n        const bound = flatten(composer);\n        this.use(async (ctx, next)=>{\n            let nextCalled = false;\n            const cont = ()=>(nextCalled = true, Promise.resolve());\n            try {\n                await bound(ctx, cont);\n            } catch (err) {\n                nextCalled = false;\n                await errorHandler(new BotError(err, ctx), cont);\n            }\n            if (nextCalled) await next();\n        });\n        return composer;\n    }\n}\nvar s = 1e3;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\nvar ms = function(val, options) {\n    options = options || {};\n    var type = typeof val;\n    if (type === \"string\" && val.length > 0) {\n        return parse1(val);\n    } else if (type === \"number\" && isFinite(val)) {\n        return options.long ? fmtLong(val) : fmtShort(val);\n    }\n    throw new Error(\"val is not a non-empty string or a valid number. val=\" + JSON.stringify(val));\n};\nfunction parse1(str) {\n    str = String(str);\n    if (str.length > 100) {\n        return;\n    }\n    var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);\n    if (!match) {\n        return;\n    }\n    var n = parseFloat(match[1]);\n    var type = (match[2] || \"ms\").toLowerCase();\n    switch(type){\n        case \"years\":\n        case \"year\":\n        case \"yrs\":\n        case \"yr\":\n        case \"y\":\n            return n * y;\n        case \"weeks\":\n        case \"week\":\n        case \"w\":\n            return n * w;\n        case \"days\":\n        case \"day\":\n        case \"d\":\n            return n * d;\n        case \"hours\":\n        case \"hour\":\n        case \"hrs\":\n        case \"hr\":\n        case \"h\":\n            return n * h;\n        case \"minutes\":\n        case \"minute\":\n        case \"mins\":\n        case \"min\":\n        case \"m\":\n            return n * m;\n        case \"seconds\":\n        case \"second\":\n        case \"secs\":\n        case \"sec\":\n        case \"s\":\n            return n * s;\n        case \"milliseconds\":\n        case \"millisecond\":\n        case \"msecs\":\n        case \"msec\":\n        case \"ms\":\n            return n;\n        default:\n            return void 0;\n    }\n}\nfunction fmtShort(ms2) {\n    var msAbs = Math.abs(ms2);\n    if (msAbs >= d) {\n        return Math.round(ms2 / d) + \"d\";\n    }\n    if (msAbs >= h) {\n        return Math.round(ms2 / h) + \"h\";\n    }\n    if (msAbs >= m) {\n        return Math.round(ms2 / m) + \"m\";\n    }\n    if (msAbs >= s) {\n        return Math.round(ms2 / s) + \"s\";\n    }\n    return ms2 + \"ms\";\n}\nfunction fmtLong(ms2) {\n    var msAbs = Math.abs(ms2);\n    if (msAbs >= d) {\n        return plural(ms2, msAbs, d, \"day\");\n    }\n    if (msAbs >= h) {\n        return plural(ms2, msAbs, h, \"hour\");\n    }\n    if (msAbs >= m) {\n        return plural(ms2, msAbs, m, \"minute\");\n    }\n    if (msAbs >= s) {\n        return plural(ms2, msAbs, s, \"second\");\n    }\n    return ms2 + \" ms\";\n}\nfunction plural(ms2, msAbs, n, name) {\n    var isPlural = msAbs >= n * 1.5;\n    return Math.round(ms2 / n) + \" \" + name + (isPlural ? \"s\" : \"\");\n}\nfunction defaultSetTimout() {\n    throw new Error(\"setTimeout has not been defined\");\n}\nfunction defaultClearTimeout() {\n    throw new Error(\"clearTimeout has not been defined\");\n}\nvar cachedSetTimeout = defaultSetTimout;\nvar cachedClearTimeout = defaultClearTimeout;\nvar globalContext;\nif (typeof window !== \"undefined\") {\n    globalContext = window;\n} else if (typeof self !== \"undefined\") {\n    globalContext = self;\n} else {\n    globalContext = {};\n}\nif (typeof globalContext.setTimeout === \"function\") {\n    cachedSetTimeout = setTimeout;\n}\nif (typeof globalContext.clearTimeout === \"function\") {\n    cachedClearTimeout = clearTimeout;\n}\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        return setTimeout(fun, 0);\n    }\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        return cachedSetTimeout(fun, 0);\n    } catch (e) {\n        try {\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch (e2) {\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        return clearTimeout(marker);\n    }\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        return cachedClearTimeout(marker);\n    } catch (e) {\n        try {\n            return cachedClearTimeout.call(null, marker);\n        } catch (e2) {\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n    var len = queue.length;\n    while(len){\n        currentQueue = queue;\n        queue = [];\n        while(++queueIndex < len){\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\nfunction nextTick(fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for(var i = 1; i < arguments.length; i++){\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n}\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function() {\n    this.fun.apply(null, this.array);\n};\nvar title = \"browser\";\nvar platform = \"browser\";\nvar browser = true;\nvar argv = [];\nvar version = \"\";\nvar versions = {};\nvar release = {};\nvar config = {};\nfunction noop() {}\nvar on = noop;\nvar addListener = noop;\nvar once = noop;\nvar off = noop;\nvar removeListener = noop;\nvar removeAllListeners = noop;\nvar emit = noop;\nfunction binding(name) {\n    throw new Error(\"process.binding is not supported\");\n}\nfunction cwd() {\n    return \"/\";\n}\nfunction chdir(dir) {\n    throw new Error(\"process.chdir is not supported\");\n}\nfunction umask() {\n    return 0;\n}\nvar performance = globalContext.performance || {};\nvar performanceNow = performance.now || performance.mozNow || performance.msNow || performance.oNow || performance.webkitNow || function() {\n    return new Date().getTime();\n};\nfunction hrtime(previousTimestamp) {\n    var clocktime = performanceNow.call(performance) * 1e-3;\n    var seconds = Math.floor(clocktime);\n    var nanoseconds = Math.floor(clocktime % 1 * 1e9);\n    if (previousTimestamp) {\n        seconds = seconds - previousTimestamp[0];\n        nanoseconds = nanoseconds - previousTimestamp[1];\n        if (nanoseconds < 0) {\n            seconds--;\n            nanoseconds += 1e9;\n        }\n    }\n    return [\n        seconds,\n        nanoseconds\n    ];\n}\nvar startTime = new Date();\nfunction uptime() {\n    var currentTime = new Date();\n    var dif = currentTime - startTime;\n    return dif / 1e3;\n}\nvar process = {\n    nextTick,\n    title,\n    browser,\n    env: {\n        NODE_ENV: \"production\"\n    },\n    argv,\n    version,\n    versions,\n    on,\n    addListener,\n    once,\n    off,\n    removeListener,\n    removeAllListeners,\n    emit,\n    binding,\n    cwd,\n    chdir,\n    umask,\n    hrtime,\n    platform,\n    release,\n    config,\n    uptime\n};\nfunction createCommonjsModule(fn, basedir, module) {\n    return module = {\n        path: basedir,\n        exports: {},\n        require: function(path, base) {\n            return commonjsRequire(path, base === void 0 || base === null ? module.path : base);\n        }\n    }, fn(module, module.exports), module.exports;\n}\nfunction commonjsRequire() {\n    throw new Error(\"Dynamic requires are not currently supported by @rollup/plugin-commonjs\");\n}\nfunction setup(env) {\n    createDebug.debug = createDebug;\n    createDebug.default = createDebug;\n    createDebug.coerce = coerce;\n    createDebug.disable = disable;\n    createDebug.enable = enable;\n    createDebug.enabled = enabled;\n    createDebug.humanize = ms;\n    createDebug.destroy = destroy2;\n    Object.keys(env).forEach((key)=>{\n        createDebug[key] = env[key];\n    });\n    createDebug.names = [];\n    createDebug.skips = [];\n    createDebug.formatters = {};\n    function selectColor(namespace) {\n        let hash = 0;\n        for(let i = 0; i < namespace.length; i++){\n            hash = (hash << 5) - hash + namespace.charCodeAt(i);\n            hash |= 0;\n        }\n        return createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n    }\n    createDebug.selectColor = selectColor;\n    function createDebug(namespace) {\n        let prevTime;\n        let enableOverride = null;\n        let namespacesCache;\n        let enabledCache;\n        function debug(...args) {\n            if (!debug.enabled) {\n                return;\n            }\n            const self2 = debug;\n            const curr = Number(new Date());\n            const ms2 = curr - (prevTime || curr);\n            self2.diff = ms2;\n            self2.prev = prevTime;\n            self2.curr = curr;\n            prevTime = curr;\n            args[0] = createDebug.coerce(args[0]);\n            if (typeof args[0] !== \"string\") {\n                args.unshift(\"%O\");\n            }\n            let index = 0;\n            args[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format)=>{\n                if (match === \"%%\") {\n                    return \"%\";\n                }\n                index++;\n                const formatter = createDebug.formatters[format];\n                if (typeof formatter === \"function\") {\n                    const val = args[index];\n                    match = formatter.call(self2, val);\n                    args.splice(index, 1);\n                    index--;\n                }\n                return match;\n            });\n            createDebug.formatArgs.call(self2, args);\n            const logFn = self2.log || createDebug.log;\n            logFn.apply(self2, args);\n        }\n        debug.namespace = namespace;\n        debug.useColors = createDebug.useColors();\n        debug.color = createDebug.selectColor(namespace);\n        debug.extend = extend;\n        debug.destroy = createDebug.destroy;\n        Object.defineProperty(debug, \"enabled\", {\n            enumerable: true,\n            configurable: false,\n            get: ()=>{\n                if (enableOverride !== null) {\n                    return enableOverride;\n                }\n                if (namespacesCache !== createDebug.namespaces) {\n                    namespacesCache = createDebug.namespaces;\n                    enabledCache = createDebug.enabled(namespace);\n                }\n                return enabledCache;\n            },\n            set: (v)=>{\n                enableOverride = v;\n            }\n        });\n        if (typeof createDebug.init === \"function\") {\n            createDebug.init(debug);\n        }\n        return debug;\n    }\n    function extend(namespace, delimiter) {\n        const newDebug = createDebug(this.namespace + (typeof delimiter === \"undefined\" ? \":\" : delimiter) + namespace);\n        newDebug.log = this.log;\n        return newDebug;\n    }\n    function enable(namespaces) {\n        createDebug.save(namespaces);\n        createDebug.namespaces = namespaces;\n        createDebug.names = [];\n        createDebug.skips = [];\n        let i;\n        const split = (typeof namespaces === \"string\" ? namespaces : \"\").split(/[\\s,]+/);\n        const len = split.length;\n        for(i = 0; i < len; i++){\n            if (!split[i]) {\n                continue;\n            }\n            namespaces = split[i].replace(/\\*/g, \".*?\");\n            if (namespaces[0] === \"-\") {\n                createDebug.skips.push(new RegExp(\"^\" + namespaces.slice(1) + \"$\"));\n            } else {\n                createDebug.names.push(new RegExp(\"^\" + namespaces + \"$\"));\n            }\n        }\n    }\n    function disable() {\n        const namespaces = [\n            ...createDebug.names.map(toNamespace),\n            ...createDebug.skips.map(toNamespace).map((namespace)=>\"-\" + namespace)\n        ].join(\",\");\n        createDebug.enable(\"\");\n        return namespaces;\n    }\n    function enabled(name) {\n        if (name[name.length - 1] === \"*\") {\n            return true;\n        }\n        let i;\n        let len;\n        for(i = 0, len = createDebug.skips.length; i < len; i++){\n            if (createDebug.skips[i].test(name)) {\n                return false;\n            }\n        }\n        for(i = 0, len = createDebug.names.length; i < len; i++){\n            if (createDebug.names[i].test(name)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    function toNamespace(regexp) {\n        return regexp.toString().substring(2, regexp.toString().length - 2).replace(/\\.\\*\\?$/, \"*\");\n    }\n    function coerce(val) {\n        if (val instanceof Error) {\n            return val.stack || val.message;\n        }\n        return val;\n    }\n    function destroy2() {\n        console.warn(\"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.\");\n    }\n    createDebug.enable(createDebug.load());\n    return createDebug;\n}\nvar common = setup;\nvar browser$1 = createCommonjsModule(function(module, exports) {\n    exports.formatArgs = formatArgs2;\n    exports.save = save2;\n    exports.load = load2;\n    exports.useColors = useColors2;\n    exports.storage = localstorage();\n    exports.destroy = (()=>{\n        let warned = false;\n        return ()=>{\n            if (!warned) {\n                warned = true;\n                console.warn(\"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.\");\n            }\n        };\n    })();\n    exports.colors = [\n        \"#0000CC\",\n        \"#0000FF\",\n        \"#0033CC\",\n        \"#0033FF\",\n        \"#0066CC\",\n        \"#0066FF\",\n        \"#0099CC\",\n        \"#0099FF\",\n        \"#00CC00\",\n        \"#00CC33\",\n        \"#00CC66\",\n        \"#00CC99\",\n        \"#00CCCC\",\n        \"#00CCFF\",\n        \"#3300CC\",\n        \"#3300FF\",\n        \"#3333CC\",\n        \"#3333FF\",\n        \"#3366CC\",\n        \"#3366FF\",\n        \"#3399CC\",\n        \"#3399FF\",\n        \"#33CC00\",\n        \"#33CC33\",\n        \"#33CC66\",\n        \"#33CC99\",\n        \"#33CCCC\",\n        \"#33CCFF\",\n        \"#6600CC\",\n        \"#6600FF\",\n        \"#6633CC\",\n        \"#6633FF\",\n        \"#66CC00\",\n        \"#66CC33\",\n        \"#9900CC\",\n        \"#9900FF\",\n        \"#9933CC\",\n        \"#9933FF\",\n        \"#99CC00\",\n        \"#99CC33\",\n        \"#CC0000\",\n        \"#CC0033\",\n        \"#CC0066\",\n        \"#CC0099\",\n        \"#CC00CC\",\n        \"#CC00FF\",\n        \"#CC3300\",\n        \"#CC3333\",\n        \"#CC3366\",\n        \"#CC3399\",\n        \"#CC33CC\",\n        \"#CC33FF\",\n        \"#CC6600\",\n        \"#CC6633\",\n        \"#CC9900\",\n        \"#CC9933\",\n        \"#CCCC00\",\n        \"#CCCC33\",\n        \"#FF0000\",\n        \"#FF0033\",\n        \"#FF0066\",\n        \"#FF0099\",\n        \"#FF00CC\",\n        \"#FF00FF\",\n        \"#FF3300\",\n        \"#FF3333\",\n        \"#FF3366\",\n        \"#FF3399\",\n        \"#FF33CC\",\n        \"#FF33FF\",\n        \"#FF6600\",\n        \"#FF6633\",\n        \"#FF9900\",\n        \"#FF9933\",\n        \"#FFCC00\",\n        \"#FFCC33\"\n    ];\n    function useColors2() {\n        if (typeof window !== \"undefined\" && window.process && (window.process.type === \"renderer\" || window.process.__nwjs)) {\n            return true;\n        }\n        if (typeof navigator !== \"undefined\" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n            return false;\n        }\n        return typeof document !== \"undefined\" && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || typeof window !== \"undefined\" && window.console && (window.console.firebug || window.console.exception && window.console.table) || typeof navigator !== \"undefined\" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 || typeof navigator !== \"undefined\" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n    }\n    function formatArgs2(args) {\n        args[0] = (this.useColors ? \"%c\" : \"\") + this.namespace + (this.useColors ? \" %c\" : \" \") + args[0] + (this.useColors ? \"%c \" : \" \") + \"+\" + module.exports.humanize(this.diff);\n        if (!this.useColors) {\n            return;\n        }\n        const c = \"color: \" + this.color;\n        args.splice(1, 0, c, \"color: inherit\");\n        let index = 0;\n        let lastC = 0;\n        args[0].replace(/%[a-zA-Z%]/g, (match)=>{\n            if (match === \"%%\") {\n                return;\n            }\n            index++;\n            if (match === \"%c\") {\n                lastC = index;\n            }\n        });\n        args.splice(lastC, 0, c);\n    }\n    exports.log = console.debug || console.log || (()=>{});\n    function save2(namespaces) {\n        try {\n            if (namespaces) {\n                exports.storage.setItem(\"debug\", namespaces);\n            } else {\n                exports.storage.removeItem(\"debug\");\n            }\n        } catch (error) {}\n    }\n    function load2() {\n        let r;\n        try {\n            r = exports.storage.getItem(\"debug\");\n        } catch (error) {}\n        if (!r && typeof process !== \"undefined\" && \"env\" in process) {\n            r = process.env.DEBUG;\n        }\n        return r;\n    }\n    function localstorage() {\n        try {\n            return localStorage;\n        } catch (error) {}\n    }\n    module.exports = common(exports);\n    const { formatters } = module.exports;\n    formatters.j = function(v) {\n        try {\n            return JSON.stringify(v);\n        } catch (error) {\n            return \"[UnexpectedJSONParseError]: \" + error.message;\n        }\n    };\n});\nbrowser$1.colors;\nbrowser$1.destroy;\nbrowser$1.formatArgs;\nbrowser$1.load;\nbrowser$1.log;\nbrowser$1.save;\nbrowser$1.storage;\nbrowser$1.useColors;\nconst itrToStream = (itr)=>{\n    const it = itr[Symbol.asyncIterator]();\n    return new ReadableStream({\n        async pull (controller) {\n            const chunk = await it.next();\n            if (chunk.done) controller.close();\n            else controller.enqueue(chunk.value);\n        }\n    });\n};\nconst baseFetchConfig = (_apiRoot)=>({});\nconst defaultAdapter = \"cloudflare\";\nconst debug = browser$1(\"grammy:warn\");\nclass GrammyError extends Error {\n    method;\n    payload;\n    ok;\n    error_code;\n    description;\n    parameters;\n    constructor(message, err, method, payload){\n        super(`${message} (${err.error_code}: ${err.description})`);\n        this.method = method;\n        this.payload = payload;\n        this.ok = false;\n        this.name = \"GrammyError\";\n        this.error_code = err.error_code;\n        this.description = err.description;\n        this.parameters = err.parameters ?? {};\n    }\n}\nfunction toGrammyError(err, method, payload) {\n    switch(err.error_code){\n        case 401:\n            debug(\"Error 401 means that your bot token is wrong, talk to https://t.me/BotFather to check it.\");\n            break;\n        case 409:\n            debug(\"Error 409 means that you are running your bot several times on long polling. Consider revoking the bot token if you believe that no other instance is running.\");\n            break;\n    }\n    return new GrammyError(`Call to '${method}' failed!`, err, method, payload);\n}\nclass HttpError extends Error {\n    error;\n    constructor(message, error){\n        super(message);\n        this.error = error;\n        this.name = \"HttpError\";\n    }\n}\nfunction isTelegramError(err) {\n    return typeof err === \"object\" && err !== null && \"status\" in err && \"statusText\" in err;\n}\nfunction toHttpError(method, sensitiveLogs) {\n    return (err)=>{\n        let msg = `Network request for '${method}' failed!`;\n        if (isTelegramError(err)) msg += ` (${err.status}: ${err.statusText})`;\n        if (sensitiveLogs && err instanceof Error) msg += ` ${err.message}`;\n        throw new HttpError(msg, err);\n    };\n}\nconst osType = (()=>{\n    const { Deno } = globalThis;\n    if (typeof Deno?.build?.os === \"string\") {\n        return Deno.build.os;\n    }\n    const { navigator: navigator1 } = globalThis;\n    if (navigator1?.appVersion?.includes?.(\"Win\")) {\n        return \"windows\";\n    }\n    return \"linux\";\n})();\nconst isWindows = osType === \"windows\";\nfunction assertPath(path) {\n    if (typeof path !== \"string\") {\n        throw new TypeError(`Path must be a string. Received ${JSON.stringify(path)}`);\n    }\n}\nfunction stripSuffix(name, suffix) {\n    if (suffix.length >= name.length) {\n        return name;\n    }\n    const lenDiff = name.length - suffix.length;\n    for(let i = suffix.length - 1; i >= 0; --i){\n        if (name.charCodeAt(lenDiff + i) !== suffix.charCodeAt(i)) {\n            return name;\n        }\n    }\n    return name.slice(0, -suffix.length);\n}\nfunction lastPathSegment(path, isSep, start = 0) {\n    let matchedNonSeparator = false;\n    let end = path.length;\n    for(let i = path.length - 1; i >= start; --i){\n        if (isSep(path.charCodeAt(i))) {\n            if (matchedNonSeparator) {\n                start = i + 1;\n                break;\n            }\n        } else if (!matchedNonSeparator) {\n            matchedNonSeparator = true;\n            end = i + 1;\n        }\n    }\n    return path.slice(start, end);\n}\nfunction assertArgs(path, suffix) {\n    assertPath(path);\n    if (path.length === 0) return path;\n    if (typeof suffix !== \"string\") {\n        throw new TypeError(`Suffix must be a string. Received ${JSON.stringify(suffix)}`);\n    }\n}\nfunction stripTrailingSeparators(segment, isSep) {\n    if (segment.length <= 1) {\n        return segment;\n    }\n    let end = segment.length;\n    for(let i = segment.length - 1; i > 0; i--){\n        if (isSep(segment.charCodeAt(i))) {\n            end = i;\n        } else {\n            break;\n        }\n    }\n    return segment.slice(0, end);\n}\nfunction isPosixPathSeparator(code) {\n    return code === 47;\n}\nfunction basename(path, suffix = \"\") {\n    assertArgs(path, suffix);\n    const lastSegment = lastPathSegment(path, isPosixPathSeparator);\n    const strippedSegment = stripTrailingSeparators(lastSegment, isPosixPathSeparator);\n    return suffix ? stripSuffix(strippedSegment, suffix) : strippedSegment;\n}\nfunction isPathSeparator(code) {\n    return code === 47 || code === 92;\n}\nfunction isWindowsDeviceRoot(code) {\n    return code >= 97 && code <= 122 || code >= 65 && code <= 90;\n}\nfunction basename1(path, suffix = \"\") {\n    assertArgs(path, suffix);\n    let start = 0;\n    if (path.length >= 2) {\n        const drive = path.charCodeAt(0);\n        if (isWindowsDeviceRoot(drive)) {\n            if (path.charCodeAt(1) === 58) start = 2;\n        }\n    }\n    const lastSegment = lastPathSegment(path, isPathSeparator, start);\n    const strippedSegment = stripTrailingSeparators(lastSegment, isPathSeparator);\n    return suffix ? stripSuffix(strippedSegment, suffix) : strippedSegment;\n}\nfunction basename2(path, suffix = \"\") {\n    return isWindows ? basename1(path, suffix) : basename(path, suffix);\n}\nclass InputFile {\n    consumed = false;\n    fileData;\n    filename;\n    constructor(file, filename){\n        this.fileData = file;\n        filename ??= this.guessFilename(file);\n        this.filename = filename;\n    }\n    guessFilename(file) {\n        if (typeof file === \"string\") return basename2(file);\n        if (typeof file !== \"object\") return undefined;\n        if (\"url\" in file) return basename2(file.url);\n        if (!(file instanceof URL)) return undefined;\n        return basename2(file.pathname) || basename2(file.hostname);\n    }\n    toRaw() {\n        if (this.consumed) {\n            throw new Error(\"Cannot reuse InputFile data source!\");\n        }\n        const data = this.fileData;\n        if (data instanceof Blob) return data.stream();\n        if (data instanceof URL) return fetchFile(data);\n        if (\"url\" in data) return fetchFile(data.url);\n        if (!(data instanceof Uint8Array)) this.consumed = true;\n        return data;\n    }\n}\nasync function* fetchFile(url) {\n    const { body } = await fetch(url);\n    if (body === null) {\n        throw new Error(`Download failed, no response body from '${url}'`);\n    }\n    yield* body;\n}\nfunction requiresFormDataUpload(payload) {\n    return payload instanceof InputFile || typeof payload === \"object\" && payload !== null && Object.values(payload).some((v)=>Array.isArray(v) ? v.some(requiresFormDataUpload) : v instanceof InputFile || requiresFormDataUpload(v));\n}\nfunction str(value) {\n    return JSON.stringify(value, (_, v)=>v ?? undefined);\n}\nfunction createJsonPayload(payload) {\n    return {\n        method: \"POST\",\n        headers: {\n            \"content-type\": \"application/json\",\n            connection: \"keep-alive\"\n        },\n        body: str(payload)\n    };\n}\nasync function* protectItr(itr, onError) {\n    try {\n        yield* itr;\n    } catch (err) {\n        onError(err);\n    }\n}\nfunction createFormDataPayload(payload, onError) {\n    const boundary = createBoundary();\n    const itr = payloadToMultipartItr(payload, boundary);\n    const safeItr = protectItr(itr, onError);\n    const stream = itrToStream(safeItr);\n    return {\n        method: \"POST\",\n        headers: {\n            \"content-type\": `multipart/form-data; boundary=${boundary}`,\n            connection: \"keep-alive\"\n        },\n        body: stream\n    };\n}\nfunction createBoundary() {\n    return \"----------\" + randomId(32);\n}\nfunction randomId(length = 16) {\n    return Array.from(Array(length)).map(()=>Math.random().toString(36)[2] || 0).join(\"\");\n}\nconst enc = new TextEncoder();\nasync function* payloadToMultipartItr(payload, boundary) {\n    const files = extractFiles(payload);\n    yield enc.encode(`--${boundary}\\r\\n`);\n    const separator = enc.encode(`\\r\\n--${boundary}\\r\\n`);\n    let first = true;\n    for (const [key, value] of Object.entries(payload)){\n        if (value == null) continue;\n        if (!first) yield separator;\n        yield valuePart(key, typeof value === \"object\" ? str(value) : value);\n        first = false;\n    }\n    for (const { id, origin, file } of files){\n        if (!first) yield separator;\n        yield* filePart(id, origin, file);\n        first = false;\n    }\n    yield enc.encode(`\\r\\n--${boundary}--\\r\\n`);\n}\nfunction extractFiles(value) {\n    if (typeof value !== \"object\" || value === null) return [];\n    return Object.entries(value).flatMap(([k, v])=>{\n        if (Array.isArray(v)) return v.flatMap((p)=>extractFiles(p));\n        else if (v instanceof InputFile) {\n            const id = randomId();\n            Object.assign(value, {\n                [k]: `attach://${id}`\n            });\n            const origin = k === \"media\" && \"type\" in value && typeof value.type === \"string\" ? value.type : k;\n            return {\n                id,\n                origin,\n                file: v\n            };\n        } else return extractFiles(v);\n    });\n}\nfunction valuePart(key, value) {\n    return enc.encode(`content-disposition:form-data;name=\"${key}\"\\r\\n\\r\\n${value}`);\n}\nasync function* filePart(id, origin, input) {\n    const filename = input.filename || `${origin}.${getExt(origin)}`;\n    if (filename.includes(\"\\r\") || filename.includes(\"\\n\")) {\n        throw new Error(`File paths cannot contain carriage-return (\\\\r) \\\nor newline (\\\\n) characters! Filename for property '${origin}' was:\n\"\"\"\n${filename}\n\"\"\"`);\n    }\n    yield enc.encode(`content-disposition:form-data;name=\"${id}\";filename=${filename}\\r\\ncontent-type:application/octet-stream\\r\\n\\r\\n`);\n    const data = await input.toRaw();\n    if (data instanceof Uint8Array) yield data;\n    else yield* data;\n}\nfunction getExt(key) {\n    switch(key){\n        case \"certificate\":\n            return \"pem\";\n        case \"photo\":\n        case \"thumbnail\":\n            return \"jpg\";\n        case \"voice\":\n            return \"ogg\";\n        case \"audio\":\n            return \"mp3\";\n        case \"animation\":\n        case \"video\":\n        case \"video_note\":\n            return \"mp4\";\n        case \"sticker\":\n            return \"webp\";\n        default:\n            return \"dat\";\n    }\n}\nconst debug1 = browser$1(\"grammy:core\");\nfunction concatTransformer(prev, trans) {\n    return (method, payload, signal)=>trans(prev, method, payload, signal);\n}\nclass ApiClient {\n    token;\n    webhookReplyEnvelope;\n    options;\n    hasUsedWebhookReply;\n    installedTransformers;\n    constructor(token, options = {}, webhookReplyEnvelope = {}){\n        this.token = token;\n        this.webhookReplyEnvelope = webhookReplyEnvelope;\n        this.hasUsedWebhookReply = false;\n        this.installedTransformers = [];\n        this.call = async (method, p, signal)=>{\n            const payload = p ?? {};\n            debug1(`Calling ${method}`);\n            if (signal !== undefined) validateSignal(method, payload, signal);\n            const opts = this.options;\n            const formDataRequired = requiresFormDataUpload(payload);\n            if (this.webhookReplyEnvelope.send !== undefined && !this.hasUsedWebhookReply && !formDataRequired && opts.canUseWebhookReply(method)) {\n                this.hasUsedWebhookReply = true;\n                const config = createJsonPayload({\n                    ...payload,\n                    method\n                });\n                await this.webhookReplyEnvelope.send(config.body);\n                return {\n                    ok: true,\n                    result: true\n                };\n            }\n            const controller = createAbortControllerFromSignal(signal);\n            const timeout = createTimeout(controller, opts.timeoutSeconds, method);\n            const streamErr = createStreamError(controller);\n            const url = opts.buildUrl(opts.apiRoot, this.token, method, opts.environment);\n            const config = formDataRequired ? createFormDataPayload(payload, (err)=>streamErr.catch(err)) : createJsonPayload(payload);\n            const sig = controller.signal;\n            const options = {\n                ...opts.baseFetchConfig,\n                signal: sig,\n                ...config\n            };\n            const successPromise = fetch(url instanceof URL ? url.href : url, options).catch(toHttpError(method, opts.sensitiveLogs));\n            const operations = [\n                successPromise,\n                streamErr.promise,\n                timeout.promise\n            ];\n            try {\n                const res = await Promise.race(operations);\n                return await res.json();\n            } finally{\n                if (timeout.handle !== undefined) clearTimeout(timeout.handle);\n            }\n        };\n        const apiRoot = options.apiRoot ?? \"https://api.telegram.org\";\n        const environment = options.environment ?? \"prod\";\n        this.options = {\n            apiRoot,\n            environment,\n            buildUrl: options.buildUrl ?? defaultBuildUrl,\n            timeoutSeconds: options.timeoutSeconds ?? 500,\n            baseFetchConfig: {\n                ...baseFetchConfig(apiRoot),\n                ...options.baseFetchConfig\n            },\n            canUseWebhookReply: options.canUseWebhookReply ?? (()=>false),\n            sensitiveLogs: options.sensitiveLogs ?? false\n        };\n        if (this.options.apiRoot.endsWith(\"/\")) {\n            throw new Error(`Remove the trailing '/' from the 'apiRoot' option (use '${this.options.apiRoot.substring(0, this.options.apiRoot.length - 1)}' instead of '${this.options.apiRoot}')`);\n        }\n    }\n    call;\n    use(...transformers) {\n        this.call = transformers.reduce(concatTransformer, this.call);\n        this.installedTransformers.push(...transformers);\n        return this;\n    }\n    async callApi(method, payload, signal) {\n        const data = await this.call(method, payload, signal);\n        if (data.ok) return data.result;\n        else throw toGrammyError(data, method, payload);\n    }\n}\nfunction createRawApi(token, options, webhookReplyEnvelope) {\n    const client = new ApiClient(token, options, webhookReplyEnvelope);\n    const proxyHandler = {\n        get (_, m) {\n            return m === \"toJSON\" ? \"__internal\" : client.callApi.bind(client, m);\n        },\n        ...proxyMethods\n    };\n    const raw = new Proxy({}, proxyHandler);\n    const installedTransformers = client.installedTransformers;\n    const api = {\n        raw,\n        installedTransformers,\n        use: (...t)=>{\n            client.use(...t);\n            return api;\n        }\n    };\n    return api;\n}\nconst defaultBuildUrl = (root, token, method, env)=>{\n    const prefix = env === \"test\" ? \"test/\" : \"\";\n    return `${root}/bot${token}/${prefix}${method}`;\n};\nconst proxyMethods = {\n    set () {\n        return false;\n    },\n    defineProperty () {\n        return false;\n    },\n    deleteProperty () {\n        return false;\n    },\n    ownKeys () {\n        return [];\n    }\n};\nfunction createTimeout(controller, seconds, method) {\n    let handle = undefined;\n    const promise = new Promise((_, reject)=>{\n        handle = setTimeout(()=>{\n            const msg = `Request to '${method}' timed out after ${seconds} seconds`;\n            reject(new Error(msg));\n            controller.abort();\n        }, 1000 * seconds);\n    });\n    return {\n        promise,\n        handle\n    };\n}\nfunction createStreamError(abortController) {\n    let onError = (err)=>{\n        throw err;\n    };\n    const promise = new Promise((_, reject)=>{\n        onError = (err)=>{\n            reject(err);\n            abortController.abort();\n        };\n    });\n    return {\n        promise,\n        catch: onError\n    };\n}\nfunction createAbortControllerFromSignal(signal) {\n    const abortController = new AbortController();\n    if (signal === undefined) return abortController;\n    const sig = signal;\n    function abort() {\n        abortController.abort();\n        sig.removeEventListener(\"abort\", abort);\n    }\n    if (sig.aborted) abort();\n    else sig.addEventListener(\"abort\", abort);\n    return {\n        abort,\n        signal: abortController.signal\n    };\n}\nfunction validateSignal(method, payload, signal) {\n    if (typeof signal?.addEventListener === \"function\") {\n        return;\n    }\n    let payload0 = JSON.stringify(payload);\n    if (payload0.length > 20) {\n        payload0 = payload0.substring(0, 16) + \" ...\";\n    }\n    let payload1 = JSON.stringify(signal);\n    if (payload1.length > 20) {\n        payload1 = payload1.substring(0, 16) + \" ...\";\n    }\n    throw new Error(`Incorrect abort signal instance found! \\\nYou passed two payloads to '${method}' but you should merge \\\nthe second one containing '${payload1}' into the first one \\\ncontaining '${payload0}'! If you are using context shortcuts, \\\nyou may want to use a method on 'ctx.api' instead.\n\nIf you want to prevent such mistakes in the future, \\\nconsider using TypeScript. https://www.typescriptlang.org/`);\n}\nclass Api {\n    token;\n    options;\n    raw;\n    config;\n    constructor(token, options, webhookReplyEnvelope){\n        this.token = token;\n        this.options = options;\n        const { raw, use, installedTransformers } = createRawApi(token, options, webhookReplyEnvelope);\n        this.raw = raw;\n        this.config = {\n            use,\n            installedTransformers: ()=>installedTransformers.slice()\n        };\n    }\n    getUpdates(other, signal) {\n        return this.raw.getUpdates({\n            ...other\n        }, signal);\n    }\n    setWebhook(url, other, signal) {\n        return this.raw.setWebhook({\n            url,\n            ...other\n        }, signal);\n    }\n    deleteWebhook(other, signal) {\n        return this.raw.deleteWebhook({\n            ...other\n        }, signal);\n    }\n    getWebhookInfo(signal) {\n        return this.raw.getWebhookInfo(signal);\n    }\n    getMe(signal) {\n        return this.raw.getMe(signal);\n    }\n    logOut(signal) {\n        return this.raw.logOut(signal);\n    }\n    close(signal) {\n        return this.raw.close(signal);\n    }\n    sendMessage(chat_id, text, other, signal) {\n        return this.raw.sendMessage({\n            chat_id,\n            text,\n            ...other\n        }, signal);\n    }\n    forwardMessage(chat_id, from_chat_id, message_id, other, signal) {\n        return this.raw.forwardMessage({\n            chat_id,\n            from_chat_id,\n            message_id,\n            ...other\n        }, signal);\n    }\n    forwardMessages(chat_id, from_chat_id, message_ids, other, signal) {\n        return this.raw.forwardMessages({\n            chat_id,\n            from_chat_id,\n            message_ids,\n            ...other\n        }, signal);\n    }\n    copyMessage(chat_id, from_chat_id, message_id, other, signal) {\n        return this.raw.copyMessage({\n            chat_id,\n            from_chat_id,\n            message_id,\n            ...other\n        }, signal);\n    }\n    copyMessages(chat_id, from_chat_id, message_ids, other, signal) {\n        return this.raw.copyMessages({\n            chat_id,\n            from_chat_id,\n            message_ids,\n            ...other\n        }, signal);\n    }\n    sendPhoto(chat_id, photo, other, signal) {\n        return this.raw.sendPhoto({\n            chat_id,\n            photo,\n            ...other\n        }, signal);\n    }\n    sendAudio(chat_id, audio, other, signal) {\n        return this.raw.sendAudio({\n            chat_id,\n            audio,\n            ...other\n        }, signal);\n    }\n    sendDocument(chat_id, document1, other, signal) {\n        return this.raw.sendDocument({\n            chat_id,\n            document: document1,\n            ...other\n        }, signal);\n    }\n    sendVideo(chat_id, video, other, signal) {\n        return this.raw.sendVideo({\n            chat_id,\n            video,\n            ...other\n        }, signal);\n    }\n    sendAnimation(chat_id, animation, other, signal) {\n        return this.raw.sendAnimation({\n            chat_id,\n            animation,\n            ...other\n        }, signal);\n    }\n    sendVoice(chat_id, voice, other, signal) {\n        return this.raw.sendVoice({\n            chat_id,\n            voice,\n            ...other\n        }, signal);\n    }\n    sendVideoNote(chat_id, video_note, other, signal) {\n        return this.raw.sendVideoNote({\n            chat_id,\n            video_note,\n            ...other\n        }, signal);\n    }\n    sendMediaGroup(chat_id, media, other, signal) {\n        return this.raw.sendMediaGroup({\n            chat_id,\n            media,\n            ...other\n        }, signal);\n    }\n    sendLocation(chat_id, latitude, longitude, other, signal) {\n        return this.raw.sendLocation({\n            chat_id,\n            latitude,\n            longitude,\n            ...other\n        }, signal);\n    }\n    editMessageLiveLocation(chat_id, message_id, latitude, longitude, other, signal) {\n        return this.raw.editMessageLiveLocation({\n            chat_id,\n            message_id,\n            latitude,\n            longitude,\n            ...other\n        }, signal);\n    }\n    editMessageLiveLocationInline(inline_message_id, latitude, longitude, other, signal) {\n        return this.raw.editMessageLiveLocation({\n            inline_message_id,\n            latitude,\n            longitude,\n            ...other\n        }, signal);\n    }\n    stopMessageLiveLocation(chat_id, message_id, other, signal) {\n        return this.raw.stopMessageLiveLocation({\n            chat_id,\n            message_id,\n            ...other\n        }, signal);\n    }\n    stopMessageLiveLocationInline(inline_message_id, other, signal) {\n        return this.raw.stopMessageLiveLocation({\n            inline_message_id,\n            ...other\n        }, signal);\n    }\n    sendPaidMedia(chat_id, star_count, media, other, signal) {\n        return this.raw.sendPaidMedia({\n            chat_id,\n            star_count,\n            media,\n            ...other\n        }, signal);\n    }\n    sendVenue(chat_id, latitude, longitude, title, address, other, signal) {\n        return this.raw.sendVenue({\n            chat_id,\n            latitude,\n            longitude,\n            title,\n            address,\n            ...other\n        }, signal);\n    }\n    sendContact(chat_id, phone_number, first_name, other, signal) {\n        return this.raw.sendContact({\n            chat_id,\n            phone_number,\n            first_name,\n            ...other\n        }, signal);\n    }\n    sendPoll(chat_id, question, options, other, signal) {\n        return this.raw.sendPoll({\n            chat_id,\n            question,\n            options,\n            ...other\n        }, signal);\n    }\n    sendDice(chat_id, emoji, other, signal) {\n        return this.raw.sendDice({\n            chat_id,\n            emoji,\n            ...other\n        }, signal);\n    }\n    setMessageReaction(chat_id, message_id, reaction, other, signal) {\n        return this.raw.setMessageReaction({\n            chat_id,\n            message_id,\n            reaction,\n            ...other\n        }, signal);\n    }\n    sendChatAction(chat_id, action, other, signal) {\n        return this.raw.sendChatAction({\n            chat_id,\n            action,\n            ...other\n        }, signal);\n    }\n    getUserProfilePhotos(user_id, other, signal) {\n        return this.raw.getUserProfilePhotos({\n            user_id,\n            ...other\n        }, signal);\n    }\n    getUserChatBoosts(chat_id, user_id, signal) {\n        return this.raw.getUserChatBoosts({\n            chat_id,\n            user_id\n        }, signal);\n    }\n    getBusinessConnection(business_connection_id, signal) {\n        return this.raw.getBusinessConnection({\n            business_connection_id\n        }, signal);\n    }\n    getFile(file_id, signal) {\n        return this.raw.getFile({\n            file_id\n        }, signal);\n    }\n    kickChatMember(...args) {\n        return this.banChatMember(...args);\n    }\n    banChatMember(chat_id, user_id, other, signal) {\n        return this.raw.banChatMember({\n            chat_id,\n            user_id,\n            ...other\n        }, signal);\n    }\n    unbanChatMember(chat_id, user_id, other, signal) {\n        return this.raw.unbanChatMember({\n            chat_id,\n            user_id,\n            ...other\n        }, signal);\n    }\n    restrictChatMember(chat_id, user_id, permissions, other, signal) {\n        return this.raw.restrictChatMember({\n            chat_id,\n            user_id,\n            permissions,\n            ...other\n        }, signal);\n    }\n    promoteChatMember(chat_id, user_id, other, signal) {\n        return this.raw.promoteChatMember({\n            chat_id,\n            user_id,\n            ...other\n        }, signal);\n    }\n    setChatAdministratorCustomTitle(chat_id, user_id, custom_title, signal) {\n        return this.raw.setChatAdministratorCustomTitle({\n            chat_id,\n            user_id,\n            custom_title\n        }, signal);\n    }\n    banChatSenderChat(chat_id, sender_chat_id, signal) {\n        return this.raw.banChatSenderChat({\n            chat_id,\n            sender_chat_id\n        }, signal);\n    }\n    unbanChatSenderChat(chat_id, sender_chat_id, signal) {\n        return this.raw.unbanChatSenderChat({\n            chat_id,\n            sender_chat_id\n        }, signal);\n    }\n    setChatPermissions(chat_id, permissions, other, signal) {\n        return this.raw.setChatPermissions({\n            chat_id,\n            permissions,\n            ...other\n        }, signal);\n    }\n    exportChatInviteLink(chat_id, signal) {\n        return this.raw.exportChatInviteLink({\n            chat_id\n        }, signal);\n    }\n    createChatInviteLink(chat_id, other, signal) {\n        return this.raw.createChatInviteLink({\n            chat_id,\n            ...other\n        }, signal);\n    }\n    editChatInviteLink(chat_id, invite_link, other, signal) {\n        return this.raw.editChatInviteLink({\n            chat_id,\n            invite_link,\n            ...other\n        }, signal);\n    }\n    createChatSubscriptionInviteLink(chat_id, subscription_period, subscription_price, other, signal) {\n        return this.raw.createChatSubscriptionInviteLink({\n            chat_id,\n            subscription_period,\n            subscription_price,\n            ...other\n        }, signal);\n    }\n    editChatSubscriptionInviteLink(chat_id, invite_link, other, signal) {\n        return this.raw.editChatSubscriptionInviteLink({\n            chat_id,\n            invite_link,\n            ...other\n        }, signal);\n    }\n    revokeChatInviteLink(chat_id, invite_link, signal) {\n        return this.raw.revokeChatInviteLink({\n            chat_id,\n            invite_link\n        }, signal);\n    }\n    approveChatJoinRequest(chat_id, user_id, signal) {\n        return this.raw.approveChatJoinRequest({\n            chat_id,\n            user_id\n        }, signal);\n    }\n    declineChatJoinRequest(chat_id, user_id, signal) {\n        return this.raw.declineChatJoinRequest({\n            chat_id,\n            user_id\n        }, signal);\n    }\n    setChatPhoto(chat_id, photo, signal) {\n        return this.raw.setChatPhoto({\n            chat_id,\n            photo\n        }, signal);\n    }\n    deleteChatPhoto(chat_id, signal) {\n        return this.raw.deleteChatPhoto({\n            chat_id\n        }, signal);\n    }\n    setChatTitle(chat_id, title, signal) {\n        return this.raw.setChatTitle({\n            chat_id,\n            title\n        }, signal);\n    }\n    setChatDescription(chat_id, description, signal) {\n        return this.raw.setChatDescription({\n            chat_id,\n            description\n        }, signal);\n    }\n    pinChatMessage(chat_id, message_id, other, signal) {\n        return this.raw.pinChatMessage({\n            chat_id,\n            message_id,\n            ...other\n        }, signal);\n    }\n    unpinChatMessage(chat_id, message_id, signal) {\n        return this.raw.unpinChatMessage({\n            chat_id,\n            message_id\n        }, signal);\n    }\n    unpinAllChatMessages(chat_id, signal) {\n        return this.raw.unpinAllChatMessages({\n            chat_id\n        }, signal);\n    }\n    leaveChat(chat_id, signal) {\n        return this.raw.leaveChat({\n            chat_id\n        }, signal);\n    }\n    getChat(chat_id, signal) {\n        return this.raw.getChat({\n            chat_id\n        }, signal);\n    }\n    getChatAdministrators(chat_id, signal) {\n        return this.raw.getChatAdministrators({\n            chat_id\n        }, signal);\n    }\n    getChatMembersCount(...args) {\n        return this.getChatMemberCount(...args);\n    }\n    getChatMemberCount(chat_id, signal) {\n        return this.raw.getChatMemberCount({\n            chat_id\n        }, signal);\n    }\n    getChatMember(chat_id, user_id, signal) {\n        return this.raw.getChatMember({\n            chat_id,\n            user_id\n        }, signal);\n    }\n    setChatStickerSet(chat_id, sticker_set_name, signal) {\n        return this.raw.setChatStickerSet({\n            chat_id,\n            sticker_set_name\n        }, signal);\n    }\n    deleteChatStickerSet(chat_id, signal) {\n        return this.raw.deleteChatStickerSet({\n            chat_id\n        }, signal);\n    }\n    getForumTopicIconStickers(signal) {\n        return this.raw.getForumTopicIconStickers(signal);\n    }\n    createForumTopic(chat_id, name, other, signal) {\n        return this.raw.createForumTopic({\n            chat_id,\n            name,\n            ...other\n        }, signal);\n    }\n    editForumTopic(chat_id, message_thread_id, other, signal) {\n        return this.raw.editForumTopic({\n            chat_id,\n            message_thread_id,\n            ...other\n        }, signal);\n    }\n    closeForumTopic(chat_id, message_thread_id, signal) {\n        return this.raw.closeForumTopic({\n            chat_id,\n            message_thread_id\n        }, signal);\n    }\n    reopenForumTopic(chat_id, message_thread_id, signal) {\n        return this.raw.reopenForumTopic({\n            chat_id,\n            message_thread_id\n        }, signal);\n    }\n    deleteForumTopic(chat_id, message_thread_id, signal) {\n        return this.raw.deleteForumTopic({\n            chat_id,\n            message_thread_id\n        }, signal);\n    }\n    unpinAllForumTopicMessages(chat_id, message_thread_id, signal) {\n        return this.raw.unpinAllForumTopicMessages({\n            chat_id,\n            message_thread_id\n        }, signal);\n    }\n    editGeneralForumTopic(chat_id, name, signal) {\n        return this.raw.editGeneralForumTopic({\n            chat_id,\n            name\n        }, signal);\n    }\n    closeGeneralForumTopic(chat_id, signal) {\n        return this.raw.closeGeneralForumTopic({\n            chat_id\n        }, signal);\n    }\n    reopenGeneralForumTopic(chat_id, signal) {\n        return this.raw.reopenGeneralForumTopic({\n            chat_id\n        }, signal);\n    }\n    hideGeneralForumTopic(chat_id, signal) {\n        return this.raw.hideGeneralForumTopic({\n            chat_id\n        }, signal);\n    }\n    unhideGeneralForumTopic(chat_id, signal) {\n        return this.raw.unhideGeneralForumTopic({\n            chat_id\n        }, signal);\n    }\n    unpinAllGeneralForumTopicMessages(chat_id, signal) {\n        return this.raw.unpinAllGeneralForumTopicMessages({\n            chat_id\n        }, signal);\n    }\n    answerCallbackQuery(callback_query_id, other, signal) {\n        return this.raw.answerCallbackQuery({\n            callback_query_id,\n            ...other\n        }, signal);\n    }\n    setMyName(name, other, signal) {\n        return this.raw.setMyName({\n            name,\n            ...other\n        }, signal);\n    }\n    getMyName(other, signal) {\n        return this.raw.getMyName(other ?? {}, signal);\n    }\n    setMyCommands(commands, other, signal) {\n        return this.raw.setMyCommands({\n            commands,\n            ...other\n        }, signal);\n    }\n    deleteMyCommands(other, signal) {\n        return this.raw.deleteMyCommands({\n            ...other\n        }, signal);\n    }\n    getMyCommands(other, signal) {\n        return this.raw.getMyCommands({\n            ...other\n        }, signal);\n    }\n    setMyDescription(description, other, signal) {\n        return this.raw.setMyDescription({\n            description,\n            ...other\n        }, signal);\n    }\n    getMyDescription(other, signal) {\n        return this.raw.getMyDescription({\n            ...other\n        }, signal);\n    }\n    setMyShortDescription(short_description, other, signal) {\n        return this.raw.setMyShortDescription({\n            short_description,\n            ...other\n        }, signal);\n    }\n    getMyShortDescription(other, signal) {\n        return this.raw.getMyShortDescription({\n            ...other\n        }, signal);\n    }\n    setChatMenuButton(other, signal) {\n        return this.raw.setChatMenuButton({\n            ...other\n        }, signal);\n    }\n    getChatMenuButton(other, signal) {\n        return this.raw.getChatMenuButton({\n            ...other\n        }, signal);\n    }\n    setMyDefaultAdministratorRights(other, signal) {\n        return this.raw.setMyDefaultAdministratorRights({\n            ...other\n        }, signal);\n    }\n    getMyDefaultAdministratorRights(other, signal) {\n        return this.raw.getMyDefaultAdministratorRights({\n            ...other\n        }, signal);\n    }\n    editMessageText(chat_id, message_id, text, other, signal) {\n        return this.raw.editMessageText({\n            chat_id,\n            message_id,\n            text,\n            ...other\n        }, signal);\n    }\n    editMessageTextInline(inline_message_id, text, other, signal) {\n        return this.raw.editMessageText({\n            inline_message_id,\n            text,\n            ...other\n        }, signal);\n    }\n    editMessageCaption(chat_id, message_id, other, signal) {\n        return this.raw.editMessageCaption({\n            chat_id,\n            message_id,\n            ...other\n        }, signal);\n    }\n    editMessageCaptionInline(inline_message_id, other, signal) {\n        return this.raw.editMessageCaption({\n            inline_message_id,\n            ...other\n        }, signal);\n    }\n    editMessageMedia(chat_id, message_id, media, other, signal) {\n        return this.raw.editMessageMedia({\n            chat_id,\n            message_id,\n            media,\n            ...other\n        }, signal);\n    }\n    editMessageMediaInline(inline_message_id, media, other, signal) {\n        return this.raw.editMessageMedia({\n            inline_message_id,\n            media,\n            ...other\n        }, signal);\n    }\n    editMessageReplyMarkup(chat_id, message_id, other, signal) {\n        return this.raw.editMessageReplyMarkup({\n            chat_id,\n            message_id,\n            ...other\n        }, signal);\n    }\n    editMessageReplyMarkupInline(inline_message_id, other, signal) {\n        return this.raw.editMessageReplyMarkup({\n            inline_message_id,\n            ...other\n        }, signal);\n    }\n    stopPoll(chat_id, message_id, other, signal) {\n        return this.raw.stopPoll({\n            chat_id,\n            message_id,\n            ...other\n        }, signal);\n    }\n    deleteMessage(chat_id, message_id, signal) {\n        return this.raw.deleteMessage({\n            chat_id,\n            message_id\n        }, signal);\n    }\n    deleteMessages(chat_id, message_ids, signal) {\n        return this.raw.deleteMessages({\n            chat_id,\n            message_ids\n        }, signal);\n    }\n    sendSticker(chat_id, sticker, other, signal) {\n        return this.raw.sendSticker({\n            chat_id,\n            sticker,\n            ...other\n        }, signal);\n    }\n    getStickerSet(name, signal) {\n        return this.raw.getStickerSet({\n            name\n        }, signal);\n    }\n    getCustomEmojiStickers(custom_emoji_ids, signal) {\n        return this.raw.getCustomEmojiStickers({\n            custom_emoji_ids\n        }, signal);\n    }\n    uploadStickerFile(user_id, sticker_format, sticker, signal) {\n        return this.raw.uploadStickerFile({\n            user_id,\n            sticker_format,\n            sticker\n        }, signal);\n    }\n    createNewStickerSet(user_id, name, title, stickers, other, signal) {\n        return this.raw.createNewStickerSet({\n            user_id,\n            name,\n            title,\n            stickers,\n            ...other\n        }, signal);\n    }\n    addStickerToSet(user_id, name, sticker, signal) {\n        return this.raw.addStickerToSet({\n            user_id,\n            name,\n            sticker\n        }, signal);\n    }\n    setStickerPositionInSet(sticker, position, signal) {\n        return this.raw.setStickerPositionInSet({\n            sticker,\n            position\n        }, signal);\n    }\n    deleteStickerFromSet(sticker, signal) {\n        return this.raw.deleteStickerFromSet({\n            sticker\n        }, signal);\n    }\n    replaceStickerInSet(user_id, name, old_sticker, sticker, signal) {\n        return this.raw.replaceStickerInSet({\n            user_id,\n            name,\n            old_sticker,\n            sticker\n        }, signal);\n    }\n    setStickerEmojiList(sticker, emoji_list, signal) {\n        return this.raw.setStickerEmojiList({\n            sticker,\n            emoji_list\n        }, signal);\n    }\n    setStickerKeywords(sticker, keywords, signal) {\n        return this.raw.setStickerKeywords({\n            sticker,\n            keywords\n        }, signal);\n    }\n    setStickerMaskPosition(sticker, mask_position, signal) {\n        return this.raw.setStickerMaskPosition({\n            sticker,\n            mask_position\n        }, signal);\n    }\n    setStickerSetTitle(name, title, signal) {\n        return this.raw.setStickerSetTitle({\n            name,\n            title\n        }, signal);\n    }\n    deleteStickerSet(name, signal) {\n        return this.raw.deleteStickerSet({\n            name\n        }, signal);\n    }\n    setStickerSetThumbnail(name, user_id, thumbnail, format, signal) {\n        return this.raw.setStickerSetThumbnail({\n            name,\n            user_id,\n            thumbnail,\n            format\n        }, signal);\n    }\n    setCustomEmojiStickerSetThumbnail(name, custom_emoji_id, signal) {\n        return this.raw.setCustomEmojiStickerSetThumbnail({\n            name,\n            custom_emoji_id\n        }, signal);\n    }\n    answerInlineQuery(inline_query_id, results, other, signal) {\n        return this.raw.answerInlineQuery({\n            inline_query_id,\n            results,\n            ...other\n        }, signal);\n    }\n    answerWebAppQuery(web_app_query_id, result, signal) {\n        return this.raw.answerWebAppQuery({\n            web_app_query_id,\n            result\n        }, signal);\n    }\n    sendInvoice(chat_id, title, description, payload, currency, prices, other, signal) {\n        return this.raw.sendInvoice({\n            chat_id,\n            title,\n            description,\n            payload,\n            currency,\n            prices,\n            ...other\n        }, signal);\n    }\n    createInvoiceLink(title, description, payload, provider_token, currency, prices, other, signal) {\n        return this.raw.createInvoiceLink({\n            title,\n            description,\n            payload,\n            provider_token,\n            currency,\n            prices,\n            ...other\n        }, signal);\n    }\n    answerShippingQuery(shipping_query_id, ok, other, signal) {\n        return this.raw.answerShippingQuery({\n            shipping_query_id,\n            ok,\n            ...other\n        }, signal);\n    }\n    answerPreCheckoutQuery(pre_checkout_query_id, ok, other, signal) {\n        return this.raw.answerPreCheckoutQuery({\n            pre_checkout_query_id,\n            ok,\n            ...other\n        }, signal);\n    }\n    getStarTransactions(other, signal) {\n        return this.raw.getStarTransactions({\n            ...other\n        }, signal);\n    }\n    refundStarPayment(user_id, telegram_payment_charge_id, signal) {\n        return this.raw.refundStarPayment({\n            user_id,\n            telegram_payment_charge_id\n        }, signal);\n    }\n    setPassportDataErrors(user_id, errors, signal) {\n        return this.raw.setPassportDataErrors({\n            user_id,\n            errors\n        }, signal);\n    }\n    sendGame(chat_id, game_short_name, other, signal) {\n        return this.raw.sendGame({\n            chat_id,\n            game_short_name,\n            ...other\n        }, signal);\n    }\n    setGameScore(chat_id, message_id, user_id, score, other, signal) {\n        return this.raw.setGameScore({\n            chat_id,\n            message_id,\n            user_id,\n            score,\n            ...other\n        }, signal);\n    }\n    setGameScoreInline(inline_message_id, user_id, score, other, signal) {\n        return this.raw.setGameScore({\n            inline_message_id,\n            user_id,\n            score,\n            ...other\n        }, signal);\n    }\n    getGameHighScores(chat_id, message_id, user_id, signal) {\n        return this.raw.getGameHighScores({\n            chat_id,\n            message_id,\n            user_id\n        }, signal);\n    }\n    getGameHighScoresInline(inline_message_id, user_id, signal) {\n        return this.raw.getGameHighScores({\n            inline_message_id,\n            user_id\n        }, signal);\n    }\n}\nconst debug2 = browser$1(\"grammy:bot\");\nconst debugWarn = browser$1(\"grammy:warn\");\nconst debugErr = browser$1(\"grammy:error\");\nconst DEFAULT_UPDATE_TYPES = [\n    \"message\",\n    \"edited_message\",\n    \"channel_post\",\n    \"edited_channel_post\",\n    \"business_connection\",\n    \"business_message\",\n    \"edited_business_message\",\n    \"deleted_business_messages\",\n    \"inline_query\",\n    \"chosen_inline_result\",\n    \"callback_query\",\n    \"shipping_query\",\n    \"pre_checkout_query\",\n    \"poll\",\n    \"poll_answer\",\n    \"my_chat_member\",\n    \"chat_join_request\",\n    \"chat_boost\",\n    \"removed_chat_boost\"\n];\nclass Bot extends Composer {\n    token;\n    pollingRunning;\n    pollingAbortController;\n    lastTriedUpdateId;\n    api;\n    me;\n    mePromise;\n    clientConfig;\n    ContextConstructor;\n    observedUpdateTypes;\n    errorHandler;\n    constructor(token, config){\n        super();\n        this.token = token;\n        this.pollingRunning = false;\n        this.lastTriedUpdateId = 0;\n        this.observedUpdateTypes = new Set();\n        this.errorHandler = async (err)=>{\n            console.error(\"Error in middleware while handling update\", err.ctx?.update?.update_id, err.error);\n            console.error(\"No error handler was set!\");\n            console.error(\"Set your own error handler with `bot.catch = ...`\");\n            if (this.pollingRunning) {\n                console.error(\"Stopping bot\");\n                await this.stop();\n            }\n            throw err;\n        };\n        if (!token) throw new Error(\"Empty token!\");\n        this.me = config?.botInfo;\n        this.clientConfig = config?.client;\n        this.ContextConstructor = config?.ContextConstructor ?? Context;\n        this.api = new Api(token, this.clientConfig);\n    }\n    set botInfo(botInfo) {\n        this.me = botInfo;\n    }\n    get botInfo() {\n        if (this.me === undefined) {\n            throw new Error(\"Bot information unavailable! Make sure to call `await bot.init()` before accessing `bot.botInfo`!\");\n        }\n        return this.me;\n    }\n    on(filter, ...middleware) {\n        for (const [u] of parse(filter).flatMap(preprocess)){\n            this.observedUpdateTypes.add(u);\n        }\n        return super.on(filter, ...middleware);\n    }\n    reaction(reaction, ...middleware) {\n        this.observedUpdateTypes.add(\"message_reaction\");\n        return super.reaction(reaction, ...middleware);\n    }\n    isInited() {\n        return this.me !== undefined;\n    }\n    async init(signal) {\n        if (!this.isInited()) {\n            debug2(\"Initializing bot\");\n            this.mePromise ??= withRetries(()=>this.api.getMe(signal), signal);\n            let me;\n            try {\n                me = await this.mePromise;\n            } finally{\n                this.mePromise = undefined;\n            }\n            if (this.me === undefined) this.me = me;\n            else debug2(\"Bot info was set by now, will not overwrite\");\n        }\n        debug2(`I am ${this.me.username}!`);\n    }\n    async handleUpdates(updates) {\n        for (const update of updates){\n            this.lastTriedUpdateId = update.update_id;\n            try {\n                await this.handleUpdate(update);\n            } catch (err) {\n                if (err instanceof BotError) {\n                    await this.errorHandler(err);\n                } else {\n                    console.error(\"FATAL: grammY unable to handle:\", err);\n                    throw err;\n                }\n            }\n        }\n    }\n    async handleUpdate(update, webhookReplyEnvelope) {\n        if (this.me === undefined) {\n            throw new Error(\"Bot not initialized! Either call `await bot.init()`, \\\nor directly set the `botInfo` option in the `Bot` constructor to specify \\\na known bot info object.\");\n        }\n        debug2(`Processing update ${update.update_id}`);\n        const api = new Api(this.token, this.clientConfig, webhookReplyEnvelope);\n        const t = this.api.config.installedTransformers();\n        if (t.length > 0) api.config.use(...t);\n        const ctx = new this.ContextConstructor(update, api, this.me);\n        try {\n            await run(this.middleware(), ctx);\n        } catch (err) {\n            debugErr(`Error in middleware for update ${update.update_id}`);\n            throw new BotError(err, ctx);\n        }\n    }\n    async start(options) {\n        const setup = [];\n        if (!this.isInited()) {\n            setup.push(this.init(this.pollingAbortController?.signal));\n        }\n        if (this.pollingRunning) {\n            await Promise.all(setup);\n            debug2(\"Simple long polling already running!\");\n            return;\n        }\n        this.pollingRunning = true;\n        this.pollingAbortController = new AbortController();\n        try {\n            setup.push(withRetries(async ()=>{\n                await this.api.deleteWebhook({\n                    drop_pending_updates: options?.drop_pending_updates\n                }, this.pollingAbortController?.signal);\n            }, this.pollingAbortController?.signal));\n            await Promise.all(setup);\n            await options?.onStart?.(this.botInfo);\n        } catch (err) {\n            this.pollingRunning = false;\n            this.pollingAbortController = undefined;\n            throw err;\n        }\n        if (!this.pollingRunning) return;\n        validateAllowedUpdates(this.observedUpdateTypes, options?.allowed_updates);\n        this.use = noUseFunction;\n        debug2(\"Starting simple long polling\");\n        await this.loop(options);\n        debug2(\"Middleware is done running\");\n    }\n    async stop() {\n        if (this.pollingRunning) {\n            debug2(\"Stopping bot, saving update offset\");\n            this.pollingRunning = false;\n            this.pollingAbortController?.abort();\n            const offset = this.lastTriedUpdateId + 1;\n            await this.api.getUpdates({\n                offset,\n                limit: 1\n            }).finally(()=>this.pollingAbortController = undefined);\n        } else {\n            debug2(\"Bot is not running!\");\n        }\n    }\n    catch(errorHandler) {\n        this.errorHandler = errorHandler;\n    }\n    async loop(options) {\n        const limit = options?.limit;\n        const timeout = options?.timeout ?? 30;\n        let allowed_updates = options?.allowed_updates ?? [];\n        while(this.pollingRunning){\n            const updates = await this.fetchUpdates({\n                limit,\n                timeout,\n                allowed_updates\n            });\n            if (updates === undefined) break;\n            await this.handleUpdates(updates);\n            allowed_updates = undefined;\n        }\n    }\n    async fetchUpdates({ limit, timeout, allowed_updates }) {\n        const offset = this.lastTriedUpdateId + 1;\n        let updates = undefined;\n        do {\n            try {\n                updates = await this.api.getUpdates({\n                    offset,\n                    limit,\n                    timeout,\n                    allowed_updates\n                }, this.pollingAbortController?.signal);\n            } catch (error) {\n                await this.handlePollingError(error);\n            }\n        }while (updates === undefined && this.pollingRunning)\n        return updates;\n    }\n    async handlePollingError(error) {\n        if (!this.pollingRunning) {\n            debug2(\"Pending getUpdates request cancelled\");\n            return;\n        }\n        let sleepSeconds = 3;\n        if (error instanceof GrammyError) {\n            debugErr(error.message);\n            if (error.error_code === 401 || error.error_code === 409) {\n                throw error;\n            } else if (error.error_code === 429) {\n                debugErr(\"Bot API server is closing.\");\n                sleepSeconds = error.parameters.retry_after ?? sleepSeconds;\n            }\n        } else debugErr(error);\n        debugErr(`Call to getUpdates failed, retrying in ${sleepSeconds} seconds ...`);\n        await sleep(sleepSeconds);\n    }\n}\nasync function withRetries(task, signal) {\n    const INITIAL_DELAY = 50;\n    let lastDelay = 50;\n    async function handleError(error) {\n        let delay = false;\n        let strategy = \"rethrow\";\n        if (error instanceof HttpError) {\n            delay = true;\n            strategy = \"retry\";\n        } else if (error instanceof GrammyError) {\n            if (error.error_code >= 500) {\n                delay = true;\n                strategy = \"retry\";\n            } else if (error.error_code === 429) {\n                const retryAfter = error.parameters.retry_after;\n                if (typeof retryAfter === \"number\") {\n                    await sleep(retryAfter, signal);\n                    lastDelay = INITIAL_DELAY;\n                } else {\n                    delay = true;\n                }\n                strategy = \"retry\";\n            }\n        }\n        if (delay) {\n            if (lastDelay !== 50) {\n                await sleep(lastDelay, signal);\n            }\n            const TWENTY_MINUTES = 20 * 60 * 1000;\n            lastDelay = Math.min(TWENTY_MINUTES, 2 * lastDelay);\n        }\n        return strategy;\n    }\n    let result = {\n        ok: false\n    };\n    while(!result.ok){\n        try {\n            result = {\n                ok: true,\n                value: await task()\n            };\n        } catch (error) {\n            debugErr(error);\n            const strategy = await handleError(error);\n            switch(strategy){\n                case \"retry\":\n                    continue;\n                case \"rethrow\":\n                    throw error;\n            }\n        }\n    }\n    return result.value;\n}\nasync function sleep(seconds, signal) {\n    let handle;\n    let reject;\n    function abort() {\n        reject?.(new Error(\"Aborted delay\"));\n        if (handle !== undefined) clearTimeout(handle);\n    }\n    try {\n        await new Promise((res, rej)=>{\n            reject = rej;\n            if (signal?.aborted) {\n                abort();\n                return;\n            }\n            signal?.addEventListener(\"abort\", abort);\n            handle = setTimeout(res, 1000 * seconds);\n        });\n    } finally{\n        signal?.removeEventListener(\"abort\", abort);\n    }\n}\nfunction validateAllowedUpdates(updates, allowed = DEFAULT_UPDATE_TYPES) {\n    const impossible = Array.from(updates).filter((u)=>!allowed.includes(u));\n    if (impossible.length > 0) {\n        debugWarn(`You registered listeners for the following update types, \\\nbut you did not specify them in \\`allowed_updates\\` \\\nso they may not be received: ${impossible.map((u)=>`'${u}'`).join(\", \")}`);\n    }\n}\nfunction noUseFunction() {\n    throw new Error(`It looks like you are registering more listeners \\\non your bot from within other listeners! This means that every time your bot \\\nhandles a message like this one, new listeners will be added. This list grows until \\\nyour machine crashes, so grammY throws this error to tell you that you should \\\nprobably do things a bit differently. If you're unsure how to resolve this problem, \\\nyou can ask in the group chat: https://telegram.me/grammyjs\n\nOn the other hand, if you actually know what you're doing and you do need to install \\\nfurther middleware while your bot is running, consider installing a composer \\\ninstance on your bot, and in turn augment the composer after the fact. This way, \\\nyou can circumvent this protection against memory leaks.`);\n}\nconst ALL_UPDATE_TYPES = [\n    ...DEFAULT_UPDATE_TYPES,\n    \"chat_member\",\n    \"message_reaction\",\n    \"message_reaction_count\"\n];\nconst ALL_CHAT_PERMISSIONS = {\n    is_anonymous: true,\n    can_manage_chat: true,\n    can_delete_messages: true,\n    can_manage_video_chats: true,\n    can_restrict_members: true,\n    can_promote_members: true,\n    can_change_info: true,\n    can_invite_users: true,\n    can_post_stories: true,\n    can_edit_stories: true,\n    can_delete_stories: true,\n    can_post_messages: true,\n    can_edit_messages: true,\n    can_pin_messages: true,\n    can_manage_topics: true\n};\nconst API_CONSTANTS = {\n    DEFAULT_UPDATE_TYPES,\n    ALL_UPDATE_TYPES,\n    ALL_CHAT_PERMISSIONS\n};\nObject.freeze(API_CONSTANTS);\nexport { API_CONSTANTS as API_CONSTANTS };\nfunction inputMessage(queryTemplate) {\n    return {\n        ...queryTemplate,\n        ...inputMessageMethods(queryTemplate)\n    };\n}\nfunction inputMessageMethods(queryTemplate) {\n    return {\n        text (message_text, options = {}) {\n            const content = {\n                message_text,\n                ...options\n            };\n            return {\n                ...queryTemplate,\n                input_message_content: content\n            };\n        },\n        location (latitude, longitude, options = {}) {\n            const content = {\n                latitude,\n                longitude,\n                ...options\n            };\n            return {\n                ...queryTemplate,\n                input_message_content: content\n            };\n        },\n        venue (title, latitude, longitude, address, options) {\n            const content = {\n                title,\n                latitude,\n                longitude,\n                address,\n                ...options\n            };\n            return {\n                ...queryTemplate,\n                input_message_content: content\n            };\n        },\n        contact (first_name, phone_number, options = {}) {\n            const content = {\n                first_name,\n                phone_number,\n                ...options\n            };\n            return {\n                ...queryTemplate,\n                input_message_content: content\n            };\n        },\n        invoice (title, description, payload, provider_token, currency, prices, options = {}) {\n            const content = {\n                title,\n                description,\n                payload,\n                provider_token,\n                currency,\n                prices,\n                ...options\n            };\n            return {\n                ...queryTemplate,\n                input_message_content: content\n            };\n        }\n    };\n}\nconst InlineQueryResultBuilder = {\n    article (id, title, options = {}) {\n        return inputMessageMethods({\n            type: \"article\",\n            id,\n            title,\n            ...options\n        });\n    },\n    audio (id, title, audio_url, options = {}) {\n        return inputMessage({\n            type: \"audio\",\n            id,\n            title,\n            audio_url: typeof audio_url === \"string\" ? audio_url : audio_url.href,\n            ...options\n        });\n    },\n    audioCached (id, audio_file_id, options = {}) {\n        return inputMessage({\n            type: \"audio\",\n            id,\n            audio_file_id,\n            ...options\n        });\n    },\n    contact (id, phone_number, first_name, options = {}) {\n        return inputMessage({\n            type: \"contact\",\n            id,\n            phone_number,\n            first_name,\n            ...options\n        });\n    },\n    documentPdf (id, title, document_url, options = {}) {\n        return inputMessage({\n            type: \"document\",\n            mime_type: \"application/pdf\",\n            id,\n            title,\n            document_url: typeof document_url === \"string\" ? document_url : document_url.href,\n            ...options\n        });\n    },\n    documentZip (id, title, document_url, options = {}) {\n        return inputMessage({\n            type: \"document\",\n            mime_type: \"application/zip\",\n            id,\n            title,\n            document_url: typeof document_url === \"string\" ? document_url : document_url.href,\n            ...options\n        });\n    },\n    documentCached (id, title, document_file_id, options = {}) {\n        return inputMessage({\n            type: \"document\",\n            id,\n            title,\n            document_file_id,\n            ...options\n        });\n    },\n    game (id, game_short_name, options = {}) {\n        return {\n            type: \"game\",\n            id,\n            game_short_name,\n            ...options\n        };\n    },\n    gif (id, gif_url, thumbnail_url, options = {}) {\n        return inputMessage({\n            type: \"gif\",\n            id,\n            gif_url: typeof gif_url === \"string\" ? gif_url : gif_url.href,\n            thumbnail_url: typeof thumbnail_url === \"string\" ? thumbnail_url : thumbnail_url.href,\n            ...options\n        });\n    },\n    gifCached (id, gif_file_id, options = {}) {\n        return inputMessage({\n            type: \"gif\",\n            id,\n            gif_file_id,\n            ...options\n        });\n    },\n    location (id, title, latitude, longitude, options = {}) {\n        return inputMessage({\n            type: \"location\",\n            id,\n            title,\n            latitude,\n            longitude,\n            ...options\n        });\n    },\n    mpeg4gif (id, mpeg4_url, thumbnail_url, options = {}) {\n        return inputMessage({\n            type: \"mpeg4_gif\",\n            id,\n            mpeg4_url: typeof mpeg4_url === \"string\" ? mpeg4_url : mpeg4_url.href,\n            thumbnail_url: typeof thumbnail_url === \"string\" ? thumbnail_url : thumbnail_url.href,\n            ...options\n        });\n    },\n    mpeg4gifCached (id, mpeg4_file_id, options = {}) {\n        return inputMessage({\n            type: \"mpeg4_gif\",\n            id,\n            mpeg4_file_id,\n            ...options\n        });\n    },\n    photo (id, photo_url, options = {\n        thumbnail_url: typeof photo_url === \"string\" ? photo_url : photo_url.href\n    }) {\n        return inputMessage({\n            type: \"photo\",\n            id,\n            photo_url: typeof photo_url === \"string\" ? photo_url : photo_url.href,\n            ...options\n        });\n    },\n    photoCached (id, photo_file_id, options = {}) {\n        return inputMessage({\n            type: \"photo\",\n            id,\n            photo_file_id,\n            ...options\n        });\n    },\n    stickerCached (id, sticker_file_id, options = {}) {\n        return inputMessage({\n            type: \"sticker\",\n            id,\n            sticker_file_id,\n            ...options\n        });\n    },\n    venue (id, title, latitude, longitude, address, options = {}) {\n        return inputMessage({\n            type: \"venue\",\n            id,\n            title,\n            latitude,\n            longitude,\n            address,\n            ...options\n        });\n    },\n    videoHtml (id, title, video_url, thumbnail_url, options = {}) {\n        return inputMessageMethods({\n            type: \"video\",\n            mime_type: \"text/html\",\n            id,\n            title,\n            video_url: typeof video_url === \"string\" ? video_url : video_url.href,\n            thumbnail_url: typeof thumbnail_url === \"string\" ? thumbnail_url : thumbnail_url.href,\n            ...options\n        });\n    },\n    videoMp4 (id, title, video_url, thumbnail_url, options = {}) {\n        return inputMessage({\n            type: \"video\",\n            mime_type: \"video/mp4\",\n            id,\n            title,\n            video_url: typeof video_url === \"string\" ? video_url : video_url.href,\n            thumbnail_url: typeof thumbnail_url === \"string\" ? thumbnail_url : thumbnail_url.href,\n            ...options\n        });\n    },\n    videoCached (id, title, video_file_id, options = {}) {\n        return inputMessage({\n            type: \"video\",\n            id,\n            title,\n            video_file_id,\n            ...options\n        });\n    },\n    voice (id, title, voice_url, options = {}) {\n        return inputMessage({\n            type: \"voice\",\n            id,\n            title,\n            voice_url: typeof voice_url === \"string\" ? voice_url : voice_url.href,\n            ...options\n        });\n    },\n    voiceCached (id, title, voice_file_id, options = {}) {\n        return inputMessage({\n            type: \"voice\",\n            id,\n            title,\n            voice_file_id,\n            ...options\n        });\n    }\n};\nexport { InlineQueryResultBuilder as InlineQueryResultBuilder };\nconst InputMediaBuilder = {\n    photo (media, options = {}) {\n        return {\n            type: \"photo\",\n            media,\n            ...options\n        };\n    },\n    video (media, options = {}) {\n        return {\n            type: \"video\",\n            media,\n            ...options\n        };\n    },\n    animation (media, options = {}) {\n        return {\n            type: \"animation\",\n            media,\n            ...options\n        };\n    },\n    audio (media, options = {}) {\n        return {\n            type: \"audio\",\n            media,\n            ...options\n        };\n    },\n    document (media, options = {}) {\n        return {\n            type: \"document\",\n            media,\n            ...options\n        };\n    }\n};\nexport { InputMediaBuilder as InputMediaBuilder };\nclass Keyboard {\n    keyboard;\n    is_persistent;\n    selective;\n    one_time_keyboard;\n    resize_keyboard;\n    input_field_placeholder;\n    constructor(keyboard = [\n        []\n    ]){\n        this.keyboard = keyboard;\n    }\n    add(...buttons) {\n        this.keyboard[this.keyboard.length - 1]?.push(...buttons);\n        return this;\n    }\n    row(...buttons) {\n        this.keyboard.push(buttons);\n        return this;\n    }\n    text(text) {\n        return this.add(Keyboard.text(text));\n    }\n    static text(text) {\n        return {\n            text\n        };\n    }\n    requestUsers(text, requestId, options = {}) {\n        return this.add(Keyboard.requestUsers(text, requestId, options));\n    }\n    static requestUsers(text, requestId, options = {}) {\n        return {\n            text,\n            request_users: {\n                request_id: requestId,\n                ...options\n            }\n        };\n    }\n    requestChat(text, requestId, options = {\n        chat_is_channel: false\n    }) {\n        return this.add(Keyboard.requestChat(text, requestId, options));\n    }\n    static requestChat(text, requestId, options = {\n        chat_is_channel: false\n    }) {\n        return {\n            text,\n            request_chat: {\n                request_id: requestId,\n                ...options\n            }\n        };\n    }\n    requestContact(text) {\n        return this.add(Keyboard.requestContact(text));\n    }\n    static requestContact(text) {\n        return {\n            text,\n            request_contact: true\n        };\n    }\n    requestLocation(text) {\n        return this.add(Keyboard.requestLocation(text));\n    }\n    static requestLocation(text) {\n        return {\n            text,\n            request_location: true\n        };\n    }\n    requestPoll(text, type) {\n        return this.add(Keyboard.requestPoll(text, type));\n    }\n    static requestPoll(text, type) {\n        return {\n            text,\n            request_poll: {\n                type\n            }\n        };\n    }\n    webApp(text, url) {\n        return this.add(Keyboard.webApp(text, url));\n    }\n    static webApp(text, url) {\n        return {\n            text,\n            web_app: {\n                url\n            }\n        };\n    }\n    persistent(isEnabled = true) {\n        this.is_persistent = isEnabled;\n        return this;\n    }\n    selected(isEnabled = true) {\n        this.selective = isEnabled;\n        return this;\n    }\n    oneTime(isEnabled = true) {\n        this.one_time_keyboard = isEnabled;\n        return this;\n    }\n    resized(isEnabled = true) {\n        this.resize_keyboard = isEnabled;\n        return this;\n    }\n    placeholder(value) {\n        this.input_field_placeholder = value;\n        return this;\n    }\n    toTransposed() {\n        const original = this.keyboard;\n        const transposed = transpose(original);\n        return this.clone(transposed);\n    }\n    toFlowed(columns, options = {}) {\n        const original = this.keyboard;\n        const flowed = reflow(original, columns, options);\n        return this.clone(flowed);\n    }\n    clone(keyboard = this.keyboard) {\n        const clone = new Keyboard(keyboard.map((row)=>row.slice()));\n        clone.is_persistent = this.is_persistent;\n        clone.selective = this.selective;\n        clone.one_time_keyboard = this.one_time_keyboard;\n        clone.resize_keyboard = this.resize_keyboard;\n        clone.input_field_placeholder = this.input_field_placeholder;\n        return clone;\n    }\n    append(...sources) {\n        for (const source of sources){\n            const keyboard = Keyboard.from(source);\n            this.keyboard.push(...keyboard.keyboard.map((row)=>row.slice()));\n        }\n        return this;\n    }\n    build() {\n        return this.keyboard;\n    }\n    static from(source) {\n        if (source instanceof Keyboard) return source.clone();\n        function toButton(btn) {\n            return typeof btn === \"string\" ? Keyboard.text(btn) : btn;\n        }\n        return new Keyboard(source.map((row)=>row.map(toButton)));\n    }\n}\nclass InlineKeyboard {\n    inline_keyboard;\n    constructor(inline_keyboard = [\n        []\n    ]){\n        this.inline_keyboard = inline_keyboard;\n    }\n    add(...buttons) {\n        this.inline_keyboard[this.inline_keyboard.length - 1]?.push(...buttons);\n        return this;\n    }\n    row(...buttons) {\n        this.inline_keyboard.push(buttons);\n        return this;\n    }\n    url(text, url) {\n        return this.add(InlineKeyboard.url(text, url));\n    }\n    static url(text, url) {\n        return {\n            text,\n            url\n        };\n    }\n    text(text, data = text) {\n        return this.add(InlineKeyboard.text(text, data));\n    }\n    static text(text, data = text) {\n        return {\n            text,\n            callback_data: data\n        };\n    }\n    webApp(text, url) {\n        return this.add(InlineKeyboard.webApp(text, url));\n    }\n    static webApp(text, url) {\n        return {\n            text,\n            web_app: {\n                url\n            }\n        };\n    }\n    login(text, loginUrl) {\n        return this.add(InlineKeyboard.login(text, loginUrl));\n    }\n    static login(text, loginUrl) {\n        return {\n            text,\n            login_url: typeof loginUrl === \"string\" ? {\n                url: loginUrl\n            } : loginUrl\n        };\n    }\n    switchInline(text, query = \"\") {\n        return this.add(InlineKeyboard.switchInline(text, query));\n    }\n    static switchInline(text, query = \"\") {\n        return {\n            text,\n            switch_inline_query: query\n        };\n    }\n    switchInlineCurrent(text, query = \"\") {\n        return this.add(InlineKeyboard.switchInlineCurrent(text, query));\n    }\n    static switchInlineCurrent(text, query = \"\") {\n        return {\n            text,\n            switch_inline_query_current_chat: query\n        };\n    }\n    switchInlineChosen(text, query = {}) {\n        return this.add(InlineKeyboard.switchInlineChosen(text, query));\n    }\n    static switchInlineChosen(text, query = {}) {\n        return {\n            text,\n            switch_inline_query_chosen_chat: query\n        };\n    }\n    game(text) {\n        return this.add(InlineKeyboard.game(text));\n    }\n    static game(text) {\n        return {\n            text,\n            callback_game: {}\n        };\n    }\n    pay(text) {\n        return this.add(InlineKeyboard.pay(text));\n    }\n    static pay(text) {\n        return {\n            text,\n            pay: true\n        };\n    }\n    toTransposed() {\n        const original = this.inline_keyboard;\n        const transposed = transpose(original);\n        return new InlineKeyboard(transposed);\n    }\n    toFlowed(columns, options = {}) {\n        const original = this.inline_keyboard;\n        const flowed = reflow(original, columns, options);\n        return new InlineKeyboard(flowed);\n    }\n    clone() {\n        return new InlineKeyboard(this.inline_keyboard.map((row)=>row.slice()));\n    }\n    append(...sources) {\n        for (const source of sources){\n            const keyboard = InlineKeyboard.from(source);\n            this.inline_keyboard.push(...keyboard.inline_keyboard.map((row)=>row.slice()));\n        }\n        return this;\n    }\n    static from(source) {\n        if (source instanceof InlineKeyboard) return source.clone();\n        return new InlineKeyboard(source.map((row)=>row.slice()));\n    }\n}\nfunction transpose(grid) {\n    const transposed = [];\n    for(let i = 0; i < grid.length; i++){\n        const row = grid[i];\n        for(let j = 0; j < row.length; j++){\n            const button = row[j];\n            (transposed[j] ??= []).push(button);\n        }\n    }\n    return transposed;\n}\nfunction reflow(grid, columns, { fillLastRow = false }) {\n    let first = columns;\n    if (fillLastRow) {\n        const buttonCount = grid.map((row)=>row.length).reduce((a, b)=>a + b, 0);\n        first = buttonCount % columns;\n    }\n    const reflowed = [];\n    for (const row of grid){\n        for (const button of row){\n            const at = Math.max(0, reflowed.length - 1);\n            const max = at === 0 ? first : columns;\n            let next = reflowed[at] ??= [];\n            if (next.length === max) {\n                next = [];\n                reflowed.push(next);\n            }\n            next.push(button);\n        }\n    }\n    return reflowed;\n}\nexport { Keyboard as Keyboard };\nexport { InlineKeyboard as InlineKeyboard };\nconst debug3 = browser$1(\"grammy:session\");\nfunction session(options = {}) {\n    return options.type === \"multi\" ? strictMultiSession(options) : strictSingleSession(options);\n}\nfunction strictSingleSession(options) {\n    const { initial, storage, getSessionKey, custom } = fillDefaults(options);\n    return async (ctx, next)=>{\n        const propSession = new PropertySession(storage, ctx, \"session\", initial);\n        const key = await getSessionKey(ctx);\n        await propSession.init(key, {\n            custom,\n            lazy: false\n        });\n        await next();\n        await propSession.finish();\n    };\n}\nfunction strictMultiSession(options) {\n    const props = Object.keys(options).filter((k)=>k !== \"type\");\n    const defaults = Object.fromEntries(props.map((prop)=>[\n            prop,\n            fillDefaults(options[prop])\n        ]));\n    return async (ctx, next)=>{\n        ctx.session = {};\n        const propSessions = await Promise.all(props.map(async (prop)=>{\n            const { initial, storage, getSessionKey, custom } = defaults[prop];\n            const s = new PropertySession(storage, ctx.session, prop, initial);\n            const key = await getSessionKey(ctx);\n            await s.init(key, {\n                custom,\n                lazy: false\n            });\n            return s;\n        }));\n        await next();\n        if (ctx.session == null) propSessions.forEach((s)=>s.delete());\n        await Promise.all(propSessions.map((s)=>s.finish()));\n    };\n}\nfunction lazySession(options = {}) {\n    if (options.type !== undefined && options.type !== \"single\") {\n        throw new Error(\"Cannot use lazy multi sessions!\");\n    }\n    const { initial, storage, getSessionKey, custom } = fillDefaults(options);\n    return async (ctx, next)=>{\n        const propSession = new PropertySession(storage, ctx, \"session\", initial);\n        const key = await getSessionKey(ctx);\n        await propSession.init(key, {\n            custom,\n            lazy: true\n        });\n        await next();\n        await propSession.finish();\n    };\n}\nclass PropertySession {\n    storage;\n    obj;\n    prop;\n    initial;\n    key;\n    value;\n    promise;\n    fetching;\n    read;\n    wrote;\n    constructor(storage, obj, prop, initial){\n        this.storage = storage;\n        this.obj = obj;\n        this.prop = prop;\n        this.initial = initial;\n        this.fetching = false;\n        this.read = false;\n        this.wrote = false;\n    }\n    load() {\n        if (this.key === undefined) {\n            return;\n        }\n        if (this.wrote) {\n            return;\n        }\n        if (this.promise === undefined) {\n            this.fetching = true;\n            this.promise = Promise.resolve(this.storage.read(this.key)).then((val)=>{\n                this.fetching = false;\n                if (this.wrote) {\n                    return this.value;\n                }\n                if (val !== undefined) {\n                    this.value = val;\n                    return val;\n                }\n                val = this.initial?.();\n                if (val !== undefined) {\n                    this.wrote = true;\n                    this.value = val;\n                }\n                return val;\n            });\n        }\n        return this.promise;\n    }\n    async init(key, opts) {\n        this.key = key;\n        if (!opts.lazy) await this.load();\n        Object.defineProperty(this.obj, this.prop, {\n            enumerable: true,\n            get: ()=>{\n                if (key === undefined) {\n                    const msg = undef(\"access\", opts);\n                    throw new Error(msg);\n                }\n                this.read = true;\n                if (!opts.lazy || this.wrote) return this.value;\n                this.load();\n                return this.fetching ? this.promise : this.value;\n            },\n            set: (v)=>{\n                if (key === undefined) {\n                    const msg = undef(\"assign\", opts);\n                    throw new Error(msg);\n                }\n                this.wrote = true;\n                this.fetching = false;\n                this.value = v;\n            }\n        });\n    }\n    delete() {\n        Object.assign(this.obj, {\n            [this.prop]: undefined\n        });\n    }\n    async finish() {\n        if (this.key !== undefined) {\n            if (this.read) await this.load();\n            if (this.read || this.wrote) {\n                const value = await this.value;\n                if (value == null) await this.storage.delete(this.key);\n                else await this.storage.write(this.key, value);\n            }\n        }\n    }\n}\nfunction fillDefaults(opts = {}) {\n    let { getSessionKey = defaultGetSessionKey, initial, storage } = opts;\n    if (storage == null) {\n        debug3(\"Storing session data in memory, all data will be lost when the bot restarts.\");\n        storage = new MemorySessionStorage();\n    }\n    const custom = getSessionKey !== defaultGetSessionKey;\n    return {\n        initial,\n        storage,\n        getSessionKey,\n        custom\n    };\n}\nfunction defaultGetSessionKey(ctx) {\n    return ctx.chatId?.toString();\n}\nfunction undef(op, opts) {\n    const { lazy = false, custom } = opts;\n    const reason = custom ? \"the custom `getSessionKey` function returned undefined for this update\" : \"this update does not belong to a chat, so the session key is undefined\";\n    return `Cannot ${op} ${lazy ? \"lazy \" : \"\"}session data because ${reason}!`;\n}\nfunction isEnhance(value) {\n    return value === undefined || typeof value === \"object\" && value !== null && \"__d\" in value;\n}\nfunction enhanceStorage(options) {\n    let { storage, millisecondsToLive, migrations } = options;\n    storage = compatStorage(storage);\n    if (millisecondsToLive !== undefined) {\n        storage = timeoutStorage(storage, millisecondsToLive);\n    }\n    if (migrations !== undefined) {\n        storage = migrationStorage(storage, migrations);\n    }\n    return wrapStorage(storage);\n}\nfunction compatStorage(storage) {\n    return {\n        read: async (k)=>{\n            const v = await storage.read(k);\n            return isEnhance(v) ? v : {\n                __d: v\n            };\n        },\n        write: (k, v)=>storage.write(k, v),\n        delete: (k)=>storage.delete(k)\n    };\n}\nfunction timeoutStorage(storage, millisecondsToLive) {\n    const ttlStorage = {\n        read: async (k)=>{\n            const value = await storage.read(k);\n            if (value === undefined) return undefined;\n            if (value.e === undefined) {\n                await ttlStorage.write(k, value);\n                return value;\n            }\n            if (value.e < Date.now()) {\n                await ttlStorage.delete(k);\n                return undefined;\n            }\n            return value;\n        },\n        write: async (k, v)=>{\n            v.e = addExpiryDate(v, millisecondsToLive).expires;\n            await storage.write(k, v);\n        },\n        delete: (k)=>storage.delete(k)\n    };\n    return ttlStorage;\n}\nfunction migrationStorage(storage, migrations) {\n    const versions = Object.keys(migrations).map((v)=>parseInt(v)).sort((a, b)=>a - b);\n    const count = versions.length;\n    if (count === 0) throw new Error(\"No migrations given!\");\n    const earliest = versions[0];\n    const last = count - 1;\n    const latest = versions[last];\n    const index = new Map();\n    versions.forEach((v, i)=>index.set(v, i));\n    function nextAfter(current) {\n        let i = last;\n        while(current <= versions[i])i--;\n        return i;\n    }\n    return {\n        read: async (k)=>{\n            const val = await storage.read(k);\n            if (val === undefined) return val;\n            let { __d: value, v: current = earliest - 1 } = val;\n            let i = 1 + (index.get(current) ?? nextAfter(current));\n            for(; i < count; i++)value = migrations[versions[i]](value);\n            return {\n                ...val,\n                v: latest,\n                __d: value\n            };\n        },\n        write: (k, v)=>storage.write(k, {\n                v: latest,\n                ...v\n            }),\n        delete: (k)=>storage.delete(k)\n    };\n}\nfunction wrapStorage(storage) {\n    return {\n        read: (k)=>Promise.resolve(storage.read(k)).then((v)=>v?.__d),\n        write: (k, v)=>storage.write(k, {\n                __d: v\n            }),\n        delete: (k)=>storage.delete(k)\n    };\n}\nclass MemorySessionStorage {\n    timeToLive;\n    storage;\n    constructor(timeToLive){\n        this.timeToLive = timeToLive;\n        this.storage = new Map();\n    }\n    read(key) {\n        const value = this.storage.get(key);\n        if (value === undefined) return undefined;\n        if (value.expires !== undefined && value.expires < Date.now()) {\n            this.delete(key);\n            return undefined;\n        }\n        return value.session;\n    }\n    readAll() {\n        return this.readAllValues();\n    }\n    readAllKeys() {\n        return Array.from(this.storage.keys());\n    }\n    readAllValues() {\n        return Array.from(this.storage.keys()).map((key)=>this.read(key)).filter((value)=>value !== undefined);\n    }\n    readAllEntries() {\n        return Array.from(this.storage.keys()).map((key)=>[\n                key,\n                this.read(key)\n            ]).filter((pair)=>pair[1] !== undefined);\n    }\n    has(key) {\n        return this.storage.has(key);\n    }\n    write(key, value) {\n        this.storage.set(key, addExpiryDate(value, this.timeToLive));\n    }\n    delete(key) {\n        this.storage.delete(key);\n    }\n}\nfunction addExpiryDate(value, ttl) {\n    if (ttl !== undefined && ttl < Infinity) {\n        const now = Date.now();\n        return {\n            session: value,\n            expires: now + ttl\n        };\n    } else {\n        return {\n            session: value\n        };\n    }\n}\nexport { session as session };\nexport { lazySession as lazySession };\nexport { enhanceStorage as enhanceStorage };\nexport { MemorySessionStorage as MemorySessionStorage };\nconst SECRET_HEADER = \"X-Telegram-Bot-Api-Secret-Token\";\nconst SECRET_HEADER_LOWERCASE = SECRET_HEADER.toLowerCase();\nconst WRONG_TOKEN_ERROR = \"secret token is wrong\";\nconst ok = ()=>new Response(null, {\n        status: 200\n    });\nconst okJson = (json)=>new Response(json, {\n        status: 200,\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    });\nconst unauthorized = ()=>new Response('\"unauthorized\"', {\n        status: 401,\n        statusText: WRONG_TOKEN_ERROR\n    });\nconst awsLambda = (event, _context, callback)=>({\n        update: JSON.parse(event.body ?? \"{}\"),\n        header: event.headers[SECRET_HEADER],\n        end: ()=>callback(null, {\n                statusCode: 200\n            }),\n        respond: (json)=>callback(null, {\n                statusCode: 200,\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: json\n            }),\n        unauthorized: ()=>callback(null, {\n                statusCode: 401\n            })\n    });\nconst awsLambdaAsync = (event, _context)=>{\n    let resolveResponse;\n    return {\n        update: JSON.parse(event.body ?? \"{}\"),\n        header: event.headers[SECRET_HEADER],\n        end: ()=>resolveResponse({\n                statusCode: 200\n            }),\n        respond: (json)=>resolveResponse({\n                statusCode: 200,\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: json\n            }),\n        unauthorized: ()=>resolveResponse({\n                statusCode: 401\n            }),\n        handlerReturn: new Promise((resolve)=>{\n            resolveResponse = resolve;\n        })\n    };\n};\nconst azure = (request, context)=>({\n        update: Promise.resolve(request.body),\n        header: context.res?.headers?.[SECRET_HEADER],\n        end: ()=>context.res = {\n                status: 200,\n                body: \"\"\n            },\n        respond: (json)=>{\n            context.res?.set?.(\"Content-Type\", \"application/json\");\n            context.res?.send?.(json);\n        },\n        unauthorized: ()=>{\n            context.res?.send?.(401, WRONG_TOKEN_ERROR);\n        }\n    });\nconst bun = (request)=>{\n    let resolveResponse;\n    return {\n        update: request.json(),\n        header: request.headers.get(SECRET_HEADER) || undefined,\n        end: ()=>{\n            resolveResponse(ok());\n        },\n        respond: (json)=>{\n            resolveResponse(okJson(json));\n        },\n        unauthorized: ()=>{\n            resolveResponse(unauthorized());\n        }\n    };\n};\nconst cloudflare = (event)=>{\n    let resolveResponse;\n    event.respondWith(new Promise((resolve)=>{\n        resolveResponse = resolve;\n    }));\n    return {\n        update: event.request.json(),\n        header: event.request.headers.get(SECRET_HEADER) || undefined,\n        end: ()=>{\n            resolveResponse(ok());\n        },\n        respond: (json)=>{\n            resolveResponse(okJson(json));\n        },\n        unauthorized: ()=>{\n            resolveResponse(unauthorized());\n        }\n    };\n};\nconst cloudflareModule = (request)=>{\n    let resolveResponse;\n    return {\n        update: request.json(),\n        header: request.headers.get(SECRET_HEADER) || undefined,\n        end: ()=>{\n            resolveResponse(ok());\n        },\n        respond: (json)=>{\n            resolveResponse(okJson(json));\n        },\n        unauthorized: ()=>{\n            resolveResponse(unauthorized());\n        },\n        handlerReturn: new Promise((resolve)=>{\n            resolveResponse = resolve;\n        })\n    };\n};\nconst express = (req, res)=>({\n        update: Promise.resolve(req.body),\n        header: req.header(SECRET_HEADER),\n        end: ()=>res.end(),\n        respond: (json)=>{\n            res.set(\"Content-Type\", \"application/json\");\n            res.send(json);\n        },\n        unauthorized: ()=>{\n            res.status(401).send(WRONG_TOKEN_ERROR);\n        }\n    });\nconst fastify = (request, reply)=>({\n        update: Promise.resolve(request.body),\n        header: request.headers[SECRET_HEADER_LOWERCASE],\n        end: ()=>reply.status(200).send(),\n        respond: (json)=>reply.headers({\n                \"Content-Type\": \"application/json\"\n            }).send(json),\n        unauthorized: ()=>reply.code(401).send(WRONG_TOKEN_ERROR)\n    });\nconst hono = (c)=>{\n    let resolveResponse;\n    return {\n        update: c.req.json(),\n        header: c.req.header(SECRET_HEADER),\n        end: ()=>{\n            resolveResponse(c.body(null));\n        },\n        respond: (json)=>{\n            resolveResponse(c.json(json));\n        },\n        unauthorized: ()=>{\n            c.status(401);\n            resolveResponse(c.body(null));\n        },\n        handlerReturn: new Promise((resolve)=>{\n            resolveResponse = resolve;\n        })\n    };\n};\nconst http = (req, res)=>{\n    const secretHeaderFromRequest = req.headers[SECRET_HEADER_LOWERCASE];\n    return {\n        update: new Promise((resolve, reject)=>{\n            const chunks = [];\n            req.on(\"data\", (chunk)=>chunks.push(chunk)).once(\"end\", ()=>{\n                const raw = Buffer.concat(chunks).toString(\"utf-8\");\n                resolve(JSON.parse(raw));\n            }).once(\"error\", reject);\n        }),\n        header: Array.isArray(secretHeaderFromRequest) ? secretHeaderFromRequest[0] : secretHeaderFromRequest,\n        end: ()=>res.end(),\n        respond: (json)=>res.writeHead(200, {\n                \"Content-Type\": \"application/json\"\n            }).end(json),\n        unauthorized: ()=>res.writeHead(401).end(WRONG_TOKEN_ERROR)\n    };\n};\nconst koa = (ctx)=>({\n        update: Promise.resolve(ctx.request.body),\n        header: ctx.get(SECRET_HEADER) || undefined,\n        end: ()=>{\n            ctx.body = \"\";\n        },\n        respond: (json)=>{\n            ctx.set(\"Content-Type\", \"application/json\");\n            ctx.response.body = json;\n        },\n        unauthorized: ()=>{\n            ctx.status = 401;\n        }\n    });\nconst nextJs = (request, response)=>({\n        update: Promise.resolve(request.body),\n        header: request.headers[SECRET_HEADER_LOWERCASE],\n        end: ()=>response.end(),\n        respond: (json)=>response.status(200).json(json),\n        unauthorized: ()=>response.status(401).send(WRONG_TOKEN_ERROR)\n    });\nconst nhttp = (rev)=>({\n        update: Promise.resolve(rev.body),\n        header: rev.headers.get(SECRET_HEADER) || undefined,\n        end: ()=>rev.response.sendStatus(200),\n        respond: (json)=>rev.response.status(200).send(json),\n        unauthorized: ()=>rev.response.status(401).send(WRONG_TOKEN_ERROR)\n    });\nconst oak = (ctx)=>({\n        update: ctx.request.body.json(),\n        header: ctx.request.headers.get(SECRET_HEADER) || undefined,\n        end: ()=>{\n            ctx.response.status = 200;\n        },\n        respond: (json)=>{\n            ctx.response.type = \"json\";\n            ctx.response.body = json;\n        },\n        unauthorized: ()=>{\n            ctx.response.status = 401;\n        }\n    });\nconst serveHttp = (requestEvent)=>({\n        update: requestEvent.request.json(),\n        header: requestEvent.request.headers.get(SECRET_HEADER) || undefined,\n        end: ()=>requestEvent.respondWith(ok()),\n        respond: (json)=>requestEvent.respondWith(okJson(json)),\n        unauthorized: ()=>requestEvent.respondWith(unauthorized())\n    });\nconst stdHttp = (req)=>{\n    let resolveResponse;\n    return {\n        update: req.json(),\n        header: req.headers.get(SECRET_HEADER) || undefined,\n        end: ()=>{\n            if (resolveResponse) resolveResponse(ok());\n        },\n        respond: (json)=>{\n            if (resolveResponse) resolveResponse(okJson(json));\n        },\n        unauthorized: ()=>{\n            if (resolveResponse) resolveResponse(unauthorized());\n        },\n        handlerReturn: new Promise((resolve)=>{\n            resolveResponse = resolve;\n        })\n    };\n};\nconst sveltekit = ({ request })=>{\n    let resolveResponse;\n    return {\n        update: Promise.resolve(request.json()),\n        header: request.headers.get(SECRET_HEADER) || undefined,\n        end: ()=>{\n            if (resolveResponse) resolveResponse(ok());\n        },\n        respond: (json)=>{\n            if (resolveResponse) resolveResponse(okJson(json));\n        },\n        unauthorized: ()=>{\n            if (resolveResponse) resolveResponse(unauthorized());\n        },\n        handlerReturn: new Promise((resolve)=>{\n            resolveResponse = resolve;\n        })\n    };\n};\nconst worktop = (req, res)=>({\n        update: Promise.resolve(req.json()),\n        header: req.headers.get(SECRET_HEADER) ?? undefined,\n        end: ()=>res.end(null),\n        respond: (json)=>res.send(200, json),\n        unauthorized: ()=>res.send(401, WRONG_TOKEN_ERROR)\n    });\nconst adapters = {\n    \"aws-lambda\": awsLambda,\n    \"aws-lambda-async\": awsLambdaAsync,\n    azure,\n    bun,\n    cloudflare,\n    \"cloudflare-mod\": cloudflareModule,\n    express,\n    fastify,\n    hono,\n    http,\n    https: http,\n    koa,\n    \"next-js\": nextJs,\n    nhttp,\n    oak,\n    serveHttp,\n    \"std/http\": stdHttp,\n    sveltekit,\n    worktop\n};\nconst debugErr1 = browser$1(\"grammy:error\");\nconst callbackAdapter = (update, callback, header, unauthorized = ()=>callback('\"unauthorized\"'))=>({\n        update: Promise.resolve(update),\n        respond: callback,\n        header,\n        unauthorized\n    });\nconst adapters1 = {\n    ...adapters,\n    callback: callbackAdapter\n};\nfunction webhookCallback(bot, adapter = defaultAdapter, onTimeout, timeoutMilliseconds, secretToken) {\n    const { onTimeout: timeout = \"throw\", timeoutMilliseconds: ms = 10_000, secretToken: token } = typeof onTimeout === \"object\" ? onTimeout : {\n        onTimeout,\n        timeoutMilliseconds,\n        secretToken\n    };\n    let initialized = false;\n    const server = typeof adapter === \"string\" ? adapters1[adapter] : adapter;\n    return async (...args)=>{\n        const { update, respond, unauthorized, end, handlerReturn, header } = server(...args);\n        if (!initialized) {\n            await bot.init();\n            initialized = true;\n        }\n        if (header !== token) {\n            await unauthorized();\n            console.log(handlerReturn);\n            return handlerReturn;\n        }\n        let usedWebhookReply = false;\n        const webhookReplyEnvelope = {\n            async send (json) {\n                usedWebhookReply = true;\n                await respond(json);\n            }\n        };\n        await timeoutIfNecessary(bot.handleUpdate(await update, webhookReplyEnvelope), typeof timeout === \"function\" ? ()=>timeout(...args) : timeout, ms);\n        if (!usedWebhookReply) end?.();\n        return handlerReturn;\n    };\n}\nfunction timeoutIfNecessary(task, onTimeout, timeout) {\n    if (timeout === Infinity) return task;\n    return new Promise((resolve, reject)=>{\n        const handle = setTimeout(()=>{\n            debugErr1(`Request timed out after ${timeout} ms`);\n            if (onTimeout === \"throw\") {\n                reject(new Error(`Request timed out after ${timeout} ms`));\n            } else {\n                if (typeof onTimeout === \"function\") onTimeout();\n                resolve();\n            }\n            const now = Date.now();\n            task.finally(()=>{\n                const diff = Date.now() - now;\n                debugErr1(`Request completed ${diff} ms after timeout!`);\n            });\n        }, timeout);\n        task.then(resolve).catch(reject).finally(()=>clearTimeout(handle));\n    });\n}\nexport { webhookCallback as webhookCallback };\nexport { Bot as Bot, BotError as BotError };\nexport { InputFile as InputFile };\nexport { Context as Context };\nexport { Composer as Composer };\nexport { matchFilter as matchFilter };\nexport { Api as Api };\nexport { GrammyError as GrammyError, HttpError as HttpError };\n","const fs = require('fs')\nconst path = require('path')\nconst os = require('os')\nconst crypto = require('crypto')\nconst packageJson = require('../package.json')\n\nconst version = packageJson.version\n\nconst LINE = /(?:^|^)\\s*(?:export\\s+)?([\\w.-]+)(?:\\s*=\\s*?|:\\s+?)(\\s*'(?:\\\\'|[^'])*'|\\s*\"(?:\\\\\"|[^\"])*\"|\\s*`(?:\\\\`|[^`])*`|[^#\\r\\n]+)?\\s*(?:#.*)?(?:$|$)/mg\n\n// Parse src into an Object\nfunction parse (src) {\n  const obj = {}\n\n  // Convert buffer to string\n  let lines = src.toString()\n\n  // Convert line breaks to same format\n  lines = lines.replace(/\\r\\n?/mg, '\\n')\n\n  let match\n  while ((match = LINE.exec(lines)) != null) {\n    const key = match[1]\n\n    // Default undefined or null to empty string\n    let value = (match[2] || '')\n\n    // Remove whitespace\n    value = value.trim()\n\n    // Check if double quoted\n    const maybeQuote = value[0]\n\n    // Remove surrounding quotes\n    value = value.replace(/^(['\"`])([\\s\\S]*)\\1$/mg, '$2')\n\n    // Expand newlines if double quoted\n    if (maybeQuote === '\"') {\n      value = value.replace(/\\\\n/g, '\\n')\n      value = value.replace(/\\\\r/g, '\\r')\n    }\n\n    // Add to object\n    obj[key] = value\n  }\n\n  return obj\n}\n\nfunction _parseVault (options) {\n  const vaultPath = _vaultPath(options)\n\n  // Parse .env.vault\n  const result = DotenvModule.configDotenv({ path: vaultPath })\n  if (!result.parsed) {\n    const err = new Error(`MISSING_DATA: Cannot parse ${vaultPath} for an unknown reason`)\n    err.code = 'MISSING_DATA'\n    throw err\n  }\n\n  // handle scenario for comma separated keys - for use with key rotation\n  // example: DOTENV_KEY=\"dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=prod,dotenv://:key_7890@dotenvx.com/vault/.env.vault?environment=prod\"\n  const keys = _dotenvKey(options).split(',')\n  const length = keys.length\n\n  let decrypted\n  for (let i = 0; i < length; i++) {\n    try {\n      // Get full key\n      const key = keys[i].trim()\n\n      // Get instructions for decrypt\n      const attrs = _instructions(result, key)\n\n      // Decrypt\n      decrypted = DotenvModule.decrypt(attrs.ciphertext, attrs.key)\n\n      break\n    } catch (error) {\n      // last key\n      if (i + 1 >= length) {\n        throw error\n      }\n      // try next key\n    }\n  }\n\n  // Parse decrypted .env string\n  return DotenvModule.parse(decrypted)\n}\n\nfunction _log (message) {\n  console.log(`[dotenv@${version}][INFO] ${message}`)\n}\n\nfunction _warn (message) {\n  console.log(`[dotenv@${version}][WARN] ${message}`)\n}\n\nfunction _debug (message) {\n  console.log(`[dotenv@${version}][DEBUG] ${message}`)\n}\n\nfunction _dotenvKey (options) {\n  // prioritize developer directly setting options.DOTENV_KEY\n  if (options && options.DOTENV_KEY && options.DOTENV_KEY.length > 0) {\n    return options.DOTENV_KEY\n  }\n\n  // secondary infra already contains a DOTENV_KEY environment variable\n  if (process.env.DOTENV_KEY && process.env.DOTENV_KEY.length > 0) {\n    return process.env.DOTENV_KEY\n  }\n\n  // fallback to empty string\n  return ''\n}\n\nfunction _instructions (result, dotenvKey) {\n  // Parse DOTENV_KEY. Format is a URI\n  let uri\n  try {\n    uri = new URL(dotenvKey)\n  } catch (error) {\n    if (error.code === 'ERR_INVALID_URL') {\n      const err = new Error('INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development')\n      err.code = 'INVALID_DOTENV_KEY'\n      throw err\n    }\n\n    throw error\n  }\n\n  // Get decrypt key\n  const key = uri.password\n  if (!key) {\n    const err = new Error('INVALID_DOTENV_KEY: Missing key part')\n    err.code = 'INVALID_DOTENV_KEY'\n    throw err\n  }\n\n  // Get environment\n  const environment = uri.searchParams.get('environment')\n  if (!environment) {\n    const err = new Error('INVALID_DOTENV_KEY: Missing environment part')\n    err.code = 'INVALID_DOTENV_KEY'\n    throw err\n  }\n\n  // Get ciphertext payload\n  const environmentKey = `DOTENV_VAULT_${environment.toUpperCase()}`\n  const ciphertext = result.parsed[environmentKey] // DOTENV_VAULT_PRODUCTION\n  if (!ciphertext) {\n    const err = new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${environmentKey} in your .env.vault file.`)\n    err.code = 'NOT_FOUND_DOTENV_ENVIRONMENT'\n    throw err\n  }\n\n  return { ciphertext, key }\n}\n\nfunction _vaultPath (options) {\n  let possibleVaultPath = null\n\n  if (options && options.path && options.path.length > 0) {\n    if (Array.isArray(options.path)) {\n      for (const filepath of options.path) {\n        if (fs.existsSync(filepath)) {\n          possibleVaultPath = filepath.endsWith('.vault') ? filepath : `${filepath}.vault`\n        }\n      }\n    } else {\n      possibleVaultPath = options.path.endsWith('.vault') ? options.path : `${options.path}.vault`\n    }\n  } else {\n    possibleVaultPath = path.resolve(process.cwd(), '.env.vault')\n  }\n\n  if (fs.existsSync(possibleVaultPath)) {\n    return possibleVaultPath\n  }\n\n  return null\n}\n\nfunction _resolveHome (envPath) {\n  return envPath[0] === '~' ? path.join(os.homedir(), envPath.slice(1)) : envPath\n}\n\nfunction _configVault (options) {\n  _log('Loading env from encrypted .env.vault')\n\n  const parsed = DotenvModule._parseVault(options)\n\n  let processEnv = process.env\n  if (options && options.processEnv != null) {\n    processEnv = options.processEnv\n  }\n\n  DotenvModule.populate(processEnv, parsed, options)\n\n  return { parsed }\n}\n\nfunction configDotenv (options) {\n  const dotenvPath = path.resolve(process.cwd(), '.env')\n  let encoding = 'utf8'\n  const debug = Boolean(options && options.debug)\n\n  if (options && options.encoding) {\n    encoding = options.encoding\n  } else {\n    if (debug) {\n      _debug('No encoding is specified. UTF-8 is used by default')\n    }\n  }\n\n  let optionPaths = [dotenvPath] // default, look for .env\n  if (options && options.path) {\n    if (!Array.isArray(options.path)) {\n      optionPaths = [_resolveHome(options.path)]\n    } else {\n      optionPaths = [] // reset default\n      for (const filepath of options.path) {\n        optionPaths.push(_resolveHome(filepath))\n      }\n    }\n  }\n\n  // Build the parsed data in a temporary object (because we need to return it).  Once we have the final\n  // parsed data, we will combine it with process.env (or options.processEnv if provided).\n  let lastError\n  const parsedAll = {}\n  for (const path of optionPaths) {\n    try {\n      // Specifying an encoding returns a string instead of a buffer\n      const parsed = DotenvModule.parse(fs.readFileSync(path, { encoding }))\n\n      DotenvModule.populate(parsedAll, parsed, options)\n    } catch (e) {\n      if (debug) {\n        _debug(`Failed to load ${path} ${e.message}`)\n      }\n      lastError = e\n    }\n  }\n\n  let processEnv = process.env\n  if (options && options.processEnv != null) {\n    processEnv = options.processEnv\n  }\n\n  DotenvModule.populate(processEnv, parsedAll, options)\n\n  if (lastError) {\n    return { parsed: parsedAll, error: lastError }\n  } else {\n    return { parsed: parsedAll }\n  }\n}\n\n// Populates process.env from .env file\nfunction config (options) {\n  // fallback to original dotenv if DOTENV_KEY is not set\n  if (_dotenvKey(options).length === 0) {\n    return DotenvModule.configDotenv(options)\n  }\n\n  const vaultPath = _vaultPath(options)\n\n  // dotenvKey exists but .env.vault file does not exist\n  if (!vaultPath) {\n    _warn(`You set DOTENV_KEY but you are missing a .env.vault file at ${vaultPath}. Did you forget to build it?`)\n\n    return DotenvModule.configDotenv(options)\n  }\n\n  return DotenvModule._configVault(options)\n}\n\nfunction decrypt (encrypted, keyStr) {\n  const key = Buffer.from(keyStr.slice(-64), 'hex')\n  let ciphertext = Buffer.from(encrypted, 'base64')\n\n  const nonce = ciphertext.subarray(0, 12)\n  const authTag = ciphertext.subarray(-16)\n  ciphertext = ciphertext.subarray(12, -16)\n\n  try {\n    const aesgcm = crypto.createDecipheriv('aes-256-gcm', key, nonce)\n    aesgcm.setAuthTag(authTag)\n    return `${aesgcm.update(ciphertext)}${aesgcm.final()}`\n  } catch (error) {\n    const isRange = error instanceof RangeError\n    const invalidKeyLength = error.message === 'Invalid key length'\n    const decryptionFailed = error.message === 'Unsupported state or unable to authenticate data'\n\n    if (isRange || invalidKeyLength) {\n      const err = new Error('INVALID_DOTENV_KEY: It must be 64 characters long (or more)')\n      err.code = 'INVALID_DOTENV_KEY'\n      throw err\n    } else if (decryptionFailed) {\n      const err = new Error('DECRYPTION_FAILED: Please check your DOTENV_KEY')\n      err.code = 'DECRYPTION_FAILED'\n      throw err\n    } else {\n      throw error\n    }\n  }\n}\n\n// Populate process.env with parsed values\nfunction populate (processEnv, parsed, options = {}) {\n  const debug = Boolean(options && options.debug)\n  const override = Boolean(options && options.override)\n\n  if (typeof parsed !== 'object') {\n    const err = new Error('OBJECT_REQUIRED: Please check the processEnv argument being passed to populate')\n    err.code = 'OBJECT_REQUIRED'\n    throw err\n  }\n\n  // Set process.env\n  for (const key of Object.keys(parsed)) {\n    if (Object.prototype.hasOwnProperty.call(processEnv, key)) {\n      if (override === true) {\n        processEnv[key] = parsed[key]\n      }\n\n      if (debug) {\n        if (override === true) {\n          _debug(`\"${key}\" is already defined and WAS overwritten`)\n        } else {\n          _debug(`\"${key}\" is already defined and was NOT overwritten`)\n        }\n      }\n    } else {\n      processEnv[key] = parsed[key]\n    }\n  }\n}\n\nconst DotenvModule = {\n  configDotenv,\n  _configVault,\n  _parseVault,\n  config,\n  decrypt,\n  parse,\n  populate\n}\n\nmodule.exports.configDotenv = DotenvModule.configDotenv\nmodule.exports._configVault = DotenvModule._configVault\nmodule.exports._parseVault = DotenvModule._parseVault\nmodule.exports.config = DotenvModule.config\nmodule.exports.decrypt = DotenvModule.decrypt\nmodule.exports.parse = DotenvModule.parse\nmodule.exports.populate = DotenvModule.populate\n\nmodule.exports = DotenvModule\n","const KEYBOARD_BUTTONS = {\r\n  START_OPTIONS: {\r\n    BREAKING_BAD: \"Давай во все тяжкие!\",\r\n    NOT_SHURE: \"Не уверен\",\r\n  },\r\n  QUESTIONS_OPTIONS: {\r\n    BASE: \"Основы тестирования\",\r\n    PROCESS: \"Процессы и методологии\",\r\n    TECHICAL: \"Инструменты и технологии\",\r\n    EXPERTISE: \"Личные качества и опыт\",\r\n  },\r\n};\r\n\r\nconst REPLIES = {\r\n  GREETINGS:\r\n    \"Привет! Я QA Interview Bot 🤖 \\nЯ помогу пройти ассессмент QA в стриме ITSM \\nХорошо подготовились?\",\r\n  QUESTION_SELECTION: \"Сейчас проверим. Выбери тему вопроса в меню 👇🏻\",\r\n  ANOTHER_QUESTION_SELECTION: \"Отлично справляешься! Выбери следующую тему вопроса в меню 👇🏻\",\r\n  RIGHT_ANSWER: \"Верно!\",\r\n  WRONG_ANSWER: \"Не верно!\",\r\n};\r\n\r\nconst ERRORS = {\r\n  TOKEN_IS_NOT_DEFINED: \"Ошибка получения токена из переменной окружения\",\r\n  UPDATE: \"Ошибка при обработке обновления\",\r\n  REQUEST: \"Ошибка в запросе:\",\r\n  HTTP: \"Не удалось установить соединение с Telegram:\",\r\n  UNKNOWN: \"Неизвестная ошибка:\",\r\n};\r\n\r\nexport { KEYBOARD_BUTTONS, REPLIES, ERRORS };\r\n","import dotenv from \"dotenv\";\r\nimport { ERRORS } from \"../constants/index.ts\";\r\n\r\ndotenv.config();\r\n\r\nexport function getToken(): string {\r\n  const token = process.env.TOKEN;\r\n  if (!token) {\r\n    throw new Error(ERRORS.TOKEN_IS_NOT_DEFINED);\r\n  }\r\n  return token;\r\n}\r\n","import data from \"../questions.json\" assert { type: \"json\" };\r\nimport { Questions } from \"contracts/index.ts\";\r\nimport { KEYBOARD_BUTTONS } from \"../constants/index.ts\";\r\n\r\nconst questions: Questions = data;\r\n\r\nfunction getRandomQuestion(topicTitle: string) {\r\n  const randomQuestionIndex = Math.floor(\r\n    Math.random() * questions[topicTitle as keyof Questions].length\r\n  );\r\n  return questions[topicTitle as keyof Questions][randomQuestionIndex];\r\n}\r\n\r\n// function getAnswer(currentTopic: string, currentiId: number) {\r\n//   const question = questions[currentTopic as keyof Questions].find(\r\n//     (question) => (question.id === currentiId)\r\n//   );\r\n//   if (!question) return null;\r\n\r\n// }\r\n\r\nfunction convertTopicTitleToCode(topicTitle: string) {\r\n  switch (true) {\r\n    case topicTitle === KEYBOARD_BUTTONS.QUESTIONS_OPTIONS.PROCESS:\r\n      return \"process\";\r\n    case topicTitle === KEYBOARD_BUTTONS.QUESTIONS_OPTIONS.TECHICAL:\r\n      return \"technical\";\r\n    case topicTitle === KEYBOARD_BUTTONS.QUESTIONS_OPTIONS.EXPERTISE:\r\n      return \"expertise\";\r\n    default:\r\n      return \"base\";\r\n  }\r\n}\r\n\r\nexport { getRandomQuestion, convertTopicTitleToCode };\r\n","import { Bot, Keyboard, InlineKeyboard, GrammyError, HttpError } from \"grammy\";\r\nimport { getToken } from \"./config/index.ts\";\r\nimport { KEYBOARD_BUTTONS, REPLIES, ERRORS } from \"./constants/index.ts\";\r\nimport { getRandomQuestion, convertTopicTitleToCode } from \"./utils/index.ts\";\r\n\r\nconst { BASE, PROCESS, TECHICAL, EXPERTISE } =\r\n  KEYBOARD_BUTTONS.QUESTIONS_OPTIONS;\r\n\r\nconst bot = new Bot(getToken());\r\n\r\nbot.command(\"start\", async (ctx) => {\r\n  const inlineKeyboard = new InlineKeyboard()\r\n    .text(KEYBOARD_BUTTONS.START_OPTIONS.BREAKING_BAD, \"breakingBad\")\r\n    .text(KEYBOARD_BUTTONS.START_OPTIONS.NOT_SHURE, \"notShure\");\r\n  await ctx.reply(REPLIES.GREETINGS, { reply_markup: inlineKeyboard });\r\n});\r\n\r\nbot.callbackQuery([\"breakingBad\", \"notShure\"], async (ctx) => {\r\n  const startKeyboard = new Keyboard()\r\n    .text(BASE)\r\n    .text(PROCESS)\r\n    .row()\r\n    .text(TECHICAL)\r\n    .text(EXPERTISE)\r\n    .resized();\r\n  await ctx.reply(REPLIES.QUESTION_SELECTION, { reply_markup: startKeyboard });\r\n});\r\n\r\nbot.hears([BASE, PROCESS, TECHICAL, EXPERTISE], async (ctx) => {\r\n  const currentTopic = convertTopicTitleToCode(ctx.message?.text ?? \"base\");\r\n  const currentQuestion = getRandomQuestion(currentTopic ?? \"base\");\r\n  const buttonRows = currentQuestion.options.map((option) => [\r\n    InlineKeyboard.text(\r\n      option.text,\r\n      JSON.stringify({ isCorrect: option.isCorrect })\r\n    ),\r\n  ]);\r\n  const inlineKeyboard = InlineKeyboard.from(buttonRows);\r\n  await ctx.reply(currentQuestion.text, {\r\n    reply_markup: inlineKeyboard,\r\n  });\r\n});\r\n\r\nbot.on(\"callback_query:data\", async (ctx) => {\r\n  const callbackData = JSON.parse(ctx.callbackQuery.data);\r\n  if (!callbackData.isCorrect) {\r\n    await ctx.answerCallbackQuery({\r\n      text: REPLIES.WRONG_ANSWER,\r\n      show_alert: true,\r\n    });\r\n  } else {\r\n    await ctx.answerCallbackQuery({ text: REPLIES.RIGHT_ANSWER });\r\n    await ctx.reply(REPLIES.ANOTHER_QUESTION_SELECTION);\r\n  }\r\n});\r\n\r\nbot.catch((err) => {\r\n  const ctx = err.ctx;\r\n  console.error(`${ERRORS.UPDATE} ${ctx.update.update_id}:`);\r\n  const e = err.error;\r\n  if (e instanceof GrammyError) {\r\n    console.error(ERRORS.REQUEST, e.description);\r\n  } else if (e instanceof HttpError) {\r\n    console.error(ERRORS.HTTP, e);\r\n  } else {\r\n    console.error(ERRORS.UNKNOWN, e);\r\n  }\r\n});\r\n\r\nbot.start();\r\n"],"names":["filterQueryCache","Map","matchFilter","filter","queries","Array","isArray","key","join","predicate","get","pred","parsed","preprocessed","flatMap","q","original","length","Error","errors","map","checkOne","r","check","preprocess","tree","l1Predicates","Object","entries","l1","subtree","l1Pred","obj","l2Predicates","l2","set","l2Pred","l3Predicates","from","l3","ctx","me","id","testMaybeArray","u","e","type","leaf","concat","reduce","or","arborist","paths","undefined","Set","add","treeify","update","compile","parse","split","valid","UPDATE_KEYS","expanded","L1_SHORTCUTS","s","L2_SHORTCUTS","n","permitted","keys","k","l1Obj","l2Obj","left","right","test","nextObj","t","p","x","some","ENTITY_KEYS","mention","hashtag","cashtag","bot_command","url","email","phone_number","bold","italic","underline","strikethrough","spoiler","blockquote","expandable_blockquote","code","pre","text_link","text_mention","custom_emoji","USER_KEYS","is_bot","is_premium","added_to_attachment_menu","REACTION_KEYS","emoji","paid","COMMON_MESSAGE_KEYS","forward_origin","user","hidden_user","chat","channel","is_topic_message","is_automatic_forward","business_connection_id","text","animation","audio","document","paid_media","photo","sticker","is_video","is_animated","premium_animation","story","video","video_note","voice","contact","dice","game","poll","venue","location","entities","caption_entities","caption","effect_id","has_media_spoiler","new_chat_title","new_chat_photo","delete_chat_photo","message_auto_delete_timer_changed","pinned_message","invoice","proximity_alert_triggered","chat_background_set","giveaway_created","giveaway","only_new_members","has_public_winners","giveaway_winners","was_refunded","giveaway_completed","video_chat_scheduled","video_chat_started","video_chat_ended","video_chat_participants_invited","web_app_data","MESSAGE_KEYS","new_chat_members","left_chat_member","group_chat_created","supergroup_chat_created","migrate_to_chat_id","migrate_from_chat_id","successful_payment","refunded_payment","users_shared","chat_shared","connected_website","write_access_allowed","passport_data","boost_added","forum_topic_created","forum_topic_edited","name","icon_custom_emoji_id","forum_topic_closed","forum_topic_reopened","general_forum_topic_hidden","general_forum_topic_unhidden","sender_boost_count","CHANNEL_POST_KEYS","channel_chat_created","CHAT_MEMBER_UPDATED_KEYS","message","edited_message","channel_post","edited_channel_post","business_connection","can_reply","is_enabled","business_message","edited_business_message","deleted_business_messages","inline_query","chosen_inline_result","callback_query","data","game_short_name","shipping_query","pre_checkout_query","poll_answer","my_chat_member","chat_member","chat_join_request","message_reaction","old_reaction","new_reaction","message_reaction_count","reactions","chat_boost","removed_chat_boost","purchased_paid_media","msg","edit","media","file","checker","filterQuery","trigger","hasText","trg","triggerFn","channelPost","match","command","hasEntities","atCommands","noAtCommands","toArray","forEach","cmd","startsWith","substring","includes","txt","offset","has","trimStart","index","indexOf","toLowerCase","username","atCommand","reaction","hasMessageReaction","normalized","customEmoji","custom_emoji_id","messageReaction","isOld","old","chatType","callbackQuery","hasCallbackQuery","gameQuery","hasGameQuery","inlineQuery","hasInlineQuery","query","chosenInlineResult","hasChosenInlineResult","result_id","preCheckoutQuery","hasPreCheckoutQuery","invoice_payload","shippingQuery","hasShippingQuery","Context","api","constructor","this","editedMessage","editedChannelPost","businessConnection","businessMessage","editedBusinessMessage","deletedBusinessMessages","messageReactionCount","pollAnswer","myChatMember","chatMember","chatJoinRequest","chatBoost","removedChatBoost","purchasedPaidMedia","senderChat","sender_chat","boost","source","msgId","message_id","chatId","user_chat_id","inlineMessageId","inline_message_id","businessConnectionId","types","filters","entity","emojiAdded","emojiKept","emojiRemoved","customEmojiAdded","customEmojiKept","customEmojiRemoved","paidAdded","push","i","len","rem","j","splice","static","hasCommand","hasReaction","hasChatType","reply","other","signal","sendMessage","orThrow","forwardMessage","chat_id","forwardMessages","message_ids","copyMessage","copyMessages","replyWithPhoto","sendPhoto","replyWithAudio","sendAudio","replyWithDocument","document1","sendDocument","replyWithVideo","sendVideo","replyWithAnimation","sendAnimation","replyWithVoice","sendVoice","replyWithVideoNote","sendVideoNote","replyWithMediaGroup","sendMediaGroup","replyWithLocation","latitude","longitude","sendLocation","editMessageLiveLocation","inlineId","editMessageLiveLocationInline","stopMessageLiveLocation","stopMessageLiveLocationInline","sendPaidMedia","star_count","replyWithVenue","title","address","sendVenue","replyWithContact","first_name","sendContact","replyWithPoll","question","options","sendPoll","replyWithDice","sendDice","replyWithChatAction","action","sendChatAction","react","setMessageReaction","getUserProfilePhotos","getUserChatBoosts","getBusinessConnection","getFile","m","file_id","kickAuthor","args","banAuthor","banChatMember","kickChatMember","user_id","unbanChatMember","restrictAuthor","permissions","restrictChatMember","promoteAuthor","promoteChatMember","setChatAdministratorAuthorCustomTitle","custom_title","setChatAdministratorCustomTitle","banChatSenderChat","sender_chat_id","unbanChatSenderChat","setChatPermissions","exportChatInviteLink","createChatInviteLink","editChatInviteLink","invite_link","createChatSubscriptionInviteLink","subscription_period","subscription_price","editChatSubscriptionInviteLink","revokeChatInviteLink","approveChatJoinRequest","declineChatJoinRequest","setChatPhoto","deleteChatPhoto","setChatTitle","setChatDescription","description","pinChatMessage","unpinChatMessage","unpinAllChatMessages","leaveChat","getChat","getChatAdministrators","getChatMembersCount","getChatMemberCount","getAuthor","getChatMember","setChatStickerSet","sticker_set_name","deleteChatStickerSet","createForumTopic","editForumTopic","thread","message_thread_id","closeForumTopic","reopenForumTopic","deleteForumTopic","unpinAllForumTopicMessages","editGeneralForumTopic","closeGeneralForumTopic","reopenGeneralForumTopic","hideGeneralForumTopic","unhideGeneralForumTopic","unpinAllGeneralForumTopicMessages","answerCallbackQuery","setChatMenuButton","getChatMenuButton","setMyDefaultAdministratorRights","getMyDefaultAdministratorRights","editMessageText","editMessageTextInline","editMessageCaption","editMessageCaptionInline","editMessageMedia","editMessageMediaInline","editMessageReplyMarkup","editMessageReplyMarkupInline","stopPoll","deleteMessage","deleteMessages","replyWithSticker","sendSticker","getCustomEmojiStickers","answerInlineQuery","results","replyWithInvoice","payload","currency","prices","sendInvoice","answerShippingQuery","ok","answerPreCheckoutQuery","error_message","refundStarPayment","telegram_payment_charge_id","setPassportDataErrors","replyWithGame","sendGame","value","method","content","triggers","res","BotError","error","super","String","generateBotErrorMessage","stack","flatten","mw","next","middleware","concat1","first","andThen","async","nextCalled","pass","_ctx","leaf1","Promise","resolve","run","Composer","handler","use","composer","on","hears","resultId","branch","drop","fork","all","lazy","middlewareFactory","arr","route","router","routeHandlers","fallback","trueMiddleware","falseMiddleware","errorBoundary","errorHandler","bound","cont","err","h","d","w","y","ms","val","str","exec","parseFloat","parse1","isFinite","long","ms2","msAbs","Math","abs","plural","fmtLong","round","fmtShort","JSON","stringify","isPlural","defaultSetTimout","defaultClearTimeout","globalContext","cachedSetTimeout","cachedClearTimeout","runTimeout","fun","setTimeout","call","e2","window","self","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","marker","runClearTimeout","Item","array","prototype","apply","noop","addListener","once","off","removeListener","removeAllListeners","emit","performance","performanceNow","now","mozNow","msNow","oNow","webkitNow","Date","getTime","startTime","process","nextTick","arguments","browser","env","NODE_ENV","argv","version","versions","binding","cwd","chdir","dir","umask","hrtime","previousTimestamp","clocktime","seconds","floor","nanoseconds","platform","release","config","uptime","fn","basedir","module","common","createDebug","namespace","prevTime","namespacesCache","enabledCache","enableOverride","debug","enabled","self2","curr","Number","diff","prev","coerce","unshift","replace","format","formatter","formatters","formatArgs","log","useColors","color","selectColor","extend","destroy","defineProperty","enumerable","configurable","namespaces","v","init","delimiter","newDebug","toNamespace","regexp","toString","default","disable","names","skips","enable","save","RegExp","slice","humanize","console","warn","hash","charCodeAt","colors","load","browser$1","exports","c","lastC","storage","setItem","removeItem","getItem","DEBUG","__nwjs","navigator","userAgent","documentElement","style","WebkitAppearance","firebug","exception","table","parseInt","$1","localStorage","localstorage","warned","path","require","base","commonjsRequire","GrammyError","error_code","parameters","HttpError","isWindows","Deno","globalThis","build","os","navigator1","appVersion","stripSuffix","suffix","lenDiff","lastPathSegment","isSep","start","matchedNonSeparator","end","assertArgs","TypeError","assertPath","stripTrailingSeparators","segment","isPosixPathSeparator","isPathSeparator","basename2","strippedSegment","basename1","basename","InputFile","consumed","fileData","filename","guessFilename","URL","pathname","hostname","toRaw","Blob","stream","fetchFile","Uint8Array","body","fetch","requiresFormDataUpload","values","_","createJsonPayload","headers","connection","createFormDataPayload","onError","boundary","randomId","itr","files","extractFiles","enc","encode","separator","valuePart","origin","filePart","payloadToMultipartItr","safeItr","protectItr","it","Symbol","asyncIterator","ReadableStream","pull","controller","chunk","done","close","enqueue","itrToStream","random","TextEncoder","assign","input","getExt","debug1","concatTransformer","trans","ApiClient","token","webhookReplyEnvelope","hasUsedWebhookReply","installedTransformers","addEventListener","payload0","payload1","validateSignal","opts","formDataRequired","send","canUseWebhookReply","result","abortController","AbortController","sig","abort","removeEventListener","aborted","createAbortControllerFromSignal","handle","promise","reject","createTimeout","timeoutSeconds","streamErr","catch","createStreamError","buildUrl","apiRoot","environment","baseFetchConfig","successPromise","href","sensitiveLogs","isTelegramError","status","statusText","toHttpError","operations","race","json","defaultBuildUrl","endsWith","transformers","callApi","toGrammyError","root","proxyMethods","deleteProperty","ownKeys","Api","raw","client","proxyHandler","bind","Proxy","createRawApi","getUpdates","setWebhook","deleteWebhook","getWebhookInfo","getMe","logOut","from_chat_id","getForumTopicIconStickers","callback_query_id","setMyName","getMyName","setMyCommands","commands","deleteMyCommands","getMyCommands","setMyDescription","getMyDescription","setMyShortDescription","short_description","getMyShortDescription","getStickerSet","custom_emoji_ids","uploadStickerFile","sticker_format","createNewStickerSet","stickers","addStickerToSet","setStickerPositionInSet","position","deleteStickerFromSet","replaceStickerInSet","old_sticker","setStickerEmojiList","emoji_list","setStickerKeywords","keywords","setStickerMaskPosition","mask_position","setStickerSetTitle","deleteStickerSet","setStickerSetThumbnail","thumbnail","setCustomEmojiStickerSetThumbnail","inline_query_id","answerWebAppQuery","web_app_query_id","createInvoiceLink","provider_token","shipping_query_id","pre_checkout_query_id","getStarTransactions","setGameScore","score","setGameScoreInline","getGameHighScores","getGameHighScoresInline","debug2","debugWarn","debugErr","DEFAULT_UPDATE_TYPES","withRetries","task","lastDelay","handleError","delay","strategy","retryAfter","retry_after","sleep","TWENTY_MINUTES","min","rej","noUseFunction","Keyboard","keyboard","is_persistent","selective","one_time_keyboard","resize_keyboard","input_field_placeholder","buttons","row","requestUsers","requestId","request_users","request_id","requestChat","chat_is_channel","request_chat","requestContact","request_contact","requestLocation","request_location","requestPoll","request_poll","webApp","web_app","persistent","isEnabled","selected","oneTime","resized","placeholder","toTransposed","transposed","transpose","clone","toFlowed","columns","flowed","reflow","append","sources","toButton","btn","InlineKeyboard","inline_keyboard","callback_data","login","loginUrl","login_url","switchInline","switch_inline_query","switchInlineCurrent","switch_inline_query_current_chat","switchInlineChosen","switch_inline_query_chosen_chat","callback_game","pay","grid","button","fillLastRow","a","b","reflowed","at","max","fs","require$$0","require$$1","require$$2","crypto","require$$3","require$$4","LINE","_debug","_dotenvKey","DOTENV_KEY","_instructions","dotenvKey","uri","password","searchParams","environmentKey","toUpperCase","ciphertext","_vaultPath","possibleVaultPath","filepath","existsSync","_resolveHome","envPath","homedir","DotenvModule","configDotenv","dotenvPath","encoding","Boolean","lastError","optionPaths","parsedAll","readFileSync","populate","processEnv","_configVault","_parseVault","vaultPath","decrypted","attrs","trim","decrypt","encrypted","keyStr","Buffer","nonce","subarray","authTag","aesgcm","createDecipheriv","setAuthTag","final","isRange","RangeError","invalidKeyLength","decryptionFailed","src","lines","maybeQuote","override","hasOwnProperty","mainModule","KEYBOARD_BUTTONS","BREAKING_BAD","NOT_SHURE","BASE","PROCESS","TECHICAL","EXPERTISE","REPLIES","ERRORS","questions","bot","pollingRunning","pollingAbortController","lastTriedUpdateId","mePromise","clientConfig","ContextConstructor","observedUpdateTypes","update_id","stop","botInfo","isInited","handleUpdates","updates","handleUpdate","setup","drop_pending_updates","onStart","allowed","impossible","validateAllowedUpdates","allowed_updates","loop","limit","finally","fetchUpdates","handlePollingError","sleepSeconds","TOKEN","getToken","inlineKeyboard","reply_markup","startKeyboard","currentQuestion","topicTitle","randomQuestionIndex","getRandomQuestion","convertTopicTitleToCode","buttonRows","option","isCorrect","show_alert"],"mappings":"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","x_google_ignoreList":[0,1]}